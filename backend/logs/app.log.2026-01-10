2026-01-10 00:12:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:12:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.username = %s
2026-01-10 00:12:23 - sqlalchemy.engine.Engine - INFO - [cached since 2310s ago] ('login_test_user',)
2026-01-10 00:12:24 - routers.auth - INFO - 用户登录成功: login_test_user
2026-01-10 00:12:24 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:12:24 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:12:24 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:12:24 - sqlalchemy.engine.Engine - INFO - [cached since 2310s ago] (7,)
2026-01-10 00:12:24 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:12:24 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.is_active = true
2026-01-10 00:12:24 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] {}
2026-01-10 00:12:24 - routers.external_systems - INFO - 用户 login_test_user 查询可访问的外部系统，返回 1 个系统
2026-01-10 00:12:24 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:12:24 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.username = %s
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - [cached since 3029s ago] ('admin',)
2026-01-10 00:24:23 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - [cached since 3030s ago] (1,)
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - [cached since 3017s ago] ()
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - [cached since 3017s ago] (1,)
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - [cached since 3017s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - [cached since 3017s ago] ()
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - [cached since 3030s ago] (1,)
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - [cached since 3017s ago] ()
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - [cached since 3017s ago] (1,)
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - [cached since 3017s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - [cached since 3017s ago] ()
2026-01-10 00:24:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - [cached since 3032s ago] (1,)
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.is_active = true
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - [cached since 721.4s ago] {}
2026-01-10 00:24:25 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - [cached since 3032s ago] (1,)
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.is_active = true
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - [cached since 721.4s ago] {}
2026-01-10 00:24:25 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:25 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:31 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:24:31 - sqlalchemy.engine.Engine - INFO - [cached since 3037s ago] (1,)
2026-01-10 00:24:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:31 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 00:24:31 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'id_1': 1, 'param_1': 1}
2026-01-10 00:24:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:31 - main - ERROR - 未处理的异常: Authentication required.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/usr/local/lib/python3.10/dist-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/usr/local/lib/python3.10/dist-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/usr/local/lib/python3.10/dist-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.10/dist-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.10/dist-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.10/dist-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
  File "/root/aioffer/backend/routers/external_systems.py", line 250, in get_system_access
    redis_client.setex(cache_key, 3600, str(token_data))
  File "/usr/local/lib/python3.10/dist-packages/redis/commands/core.py", line 2366, in setex
    return self.execute_command("SETEX", name, time, value)
  File "/usr/local/lib/python3.10/dist-packages/redis/client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 1086, in get_connection
    connection.connect()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 276, in connect
    self.on_connect()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 379, in on_connect
    self.read_response()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 500, in read_response
    response = self._parser.read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/dist-packages/redis/_parsers/resp2.py", line 15, in read_response
    result = self._read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/dist-packages/redis/_parsers/resp2.py", line 38, in _read_response
    raise error
redis.exceptions.AuthenticationError: Authentication required.
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - [cached since 3042s ago] (1,)
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.is_active = true
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - [cached since 732.2s ago] {}
2026-01-10 00:24:36 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - [cached since 3042s ago] (1,)
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.is_active = true
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - [cached since 732.2s ago] {}
2026-01-10 00:24:36 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:37 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:37 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:24:37 - sqlalchemy.engine.Engine - INFO - [cached since 3044s ago] (1,)
2026-01-10 00:24:37 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:37 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 00:24:37 - sqlalchemy.engine.Engine - INFO - [cached since 6.499s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 00:24:37 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:37 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:37 - main - ERROR - 未处理的异常: Authentication required.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/usr/local/lib/python3.10/dist-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/usr/local/lib/python3.10/dist-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/usr/local/lib/python3.10/dist-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.10/dist-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.10/dist-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.10/dist-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
  File "/root/aioffer/backend/routers/external_systems.py", line 250, in get_system_access
    redis_client.setex(cache_key, 3600, str(token_data))
  File "/usr/local/lib/python3.10/dist-packages/redis/commands/core.py", line 2366, in setex
    return self.execute_command("SETEX", name, time, value)
  File "/usr/local/lib/python3.10/dist-packages/redis/client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 1086, in get_connection
    connection.connect()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 276, in connect
    self.on_connect()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 379, in on_connect
    self.read_response()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 500, in read_response
    response = self._parser.read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/dist-packages/redis/_parsers/resp2.py", line 15, in read_response
    result = self._read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/dist-packages/redis/_parsers/resp2.py", line 38, in _read_response
    raise error
redis.exceptions.AuthenticationError: Authentication required.
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - [cached since 3039s ago] ('email', 'admin@example.com')
2026-01-10 00:24:45 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - [cached since 3052s ago] (1,)
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - [cached since 3039s ago] ()
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - [cached since 3039s ago] (1,)
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - [cached since 3039s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - [cached since 3039s ago] ()
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - [cached since 3052s ago] (1,)
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - [cached since 3039s ago] ()
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - [cached since 3039s ago] (1,)
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - [cached since 3039s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - [cached since 3039s ago] ()
2026-01-10 00:24:45 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - [cached since 3055s ago] (1,)
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.is_active = true
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - [cached since 744.8s ago] {}
2026-01-10 00:24:48 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - [cached since 3055s ago] (1,)
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.is_active = true
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - [cached since 744.8s ago] {}
2026-01-10 00:24:48 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:48 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:24:49 - sqlalchemy.engine.Engine - INFO - [cached since 3056s ago] (1,)
2026-01-10 00:24:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:49 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 00:24:49 - sqlalchemy.engine.Engine - INFO - [cached since 18.63s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 00:24:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:49 - main - ERROR - 未处理的异常: Authentication required.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/usr/local/lib/python3.10/dist-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/usr/local/lib/python3.10/dist-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/usr/local/lib/python3.10/dist-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.10/dist-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.10/dist-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.10/dist-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
  File "/root/aioffer/backend/routers/external_systems.py", line 250, in get_system_access
    redis_client.setex(cache_key, 3600, str(token_data))
  File "/usr/local/lib/python3.10/dist-packages/redis/commands/core.py", line 2366, in setex
    return self.execute_command("SETEX", name, time, value)
  File "/usr/local/lib/python3.10/dist-packages/redis/client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 1086, in get_connection
    connection.connect()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 276, in connect
    self.on_connect()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 379, in on_connect
    self.read_response()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 500, in read_response
    response = self._parser.read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/dist-packages/redis/_parsers/resp2.py", line 15, in read_response
    result = self._read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/dist-packages/redis/_parsers/resp2.py", line 38, in _read_response
    raise error
redis.exceptions.AuthenticationError: Authentication required.
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - [cached since 3051s ago] ('email', 'admin@example.com')
2026-01-10 00:24:57 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - [cached since 3064s ago] (1,)
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - [cached since 3051s ago] ()
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - [cached since 3051s ago] (1,)
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - [cached since 3051s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - [cached since 3051s ago] ()
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - [cached since 3064s ago] (1,)
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - [cached since 3051s ago] ()
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - [cached since 3051s ago] (1,)
2026-01-10 00:24:57 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:24:58 - sqlalchemy.engine.Engine - INFO - [cached since 3051s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:24:58 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:24:58 - sqlalchemy.engine.Engine - INFO - [cached since 3051s ago] ()
2026-01-10 00:24:58 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - [cached since 3058s ago] ('email', 'admin@example.com')
2026-01-10 00:25:04 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - [cached since 3071s ago] (1,)
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - [cached since 3058s ago] ()
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - [cached since 3058s ago] (1,)
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - [cached since 3058s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - [cached since 3058s ago] ()
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - [cached since 3071s ago] (1,)
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - [cached since 3058s ago] ()
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - [cached since 3058s ago] (1,)
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - [cached since 3058s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - [cached since 3058s ago] ()
2026-01-10 00:25:04 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:25:11 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:25:11 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 00:25:11 - sqlalchemy.engine.Engine - INFO - [cached since 3066s ago] ('email', 'admin@example.com')
2026-01-10 00:25:12 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - [cached since 3078s ago] (1,)
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - [cached since 3066s ago] ()
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - [cached since 3066s ago] (1,)
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - [cached since 3066s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - [cached since 3066s ago] ()
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - [cached since 3078s ago] (1,)
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - [cached since 3066s ago] ()
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - [cached since 3066s ago] (1,)
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - [cached since 3066s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - [cached since 3066s ago] ()
2026-01-10 00:25:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - [cached since 3082s ago] (1,)
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - [cached since 3069s ago] ()
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - [cached since 3069s ago] (1,)
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - [cached since 3069s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - [cached since 3069s ago] ()
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - [cached since 3082s ago] (1,)
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - [cached since 3069s ago] ()
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - [cached since 3069s ago] (1,)
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - [cached since 3069s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - [cached since 3069s ago] ()
2026-01-10 00:25:16 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:29:10 - main - INFO - 应用正在关闭...
2026-01-10 00:29:11 - main - INFO - 正在初始化数据库...
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`users`
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_auths`
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`members`
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_roles`
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`role_permissions`
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`roles`
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`permissions`
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`menus`
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`orders`
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`point_transactions`
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`external_systems`
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`system_configs`
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 00:29:11 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 00:29:11 - main - INFO - 数据库初始化完成
2026-01-10 00:43:26 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:43:26 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 00:43:26 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ('email', 'admin@example.com')
2026-01-10 00:43:26 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 00:43:26 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (1,)
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ()
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (1,)
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] (datetime.date(2026, 1, 10),)
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ()
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.01683s ago] (1,)
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.01601s ago] ()
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.01502s ago] (1,)
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.0143s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.01368s ago] ()
2026-01-10 00:43:27 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - [cached since 5.829s ago] (1,)
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] {}
2026-01-10 00:43:32 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - [cached since 5.848s ago] (1,)
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.01493s ago] {}
2026-01-10 00:43:32 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:43:32 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:43:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:43:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:43:34 - sqlalchemy.engine.Engine - INFO - [cached since 7.214s ago] (1,)
2026-01-10 00:43:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:43:34 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 00:43:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] {'id_1': 1, 'param_1': 1}
2026-01-10 00:43:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:43:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:43:34 - main - ERROR - 未处理的异常: Authentication required.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/usr/local/lib/python3.10/dist-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/usr/local/lib/python3.10/dist-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/usr/local/lib/python3.10/dist-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.10/dist-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.10/dist-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.10/dist-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
  File "/root/aioffer/backend/routers/external_systems.py", line 300, in get_system_access
    redis_client.setex(cache_key, 3600, json.dumps(token_data, ensure_ascii=False))
  File "/usr/local/lib/python3.10/dist-packages/redis/commands/core.py", line 2366, in setex
    return self.execute_command("SETEX", name, time, value)
  File "/usr/local/lib/python3.10/dist-packages/redis/client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 1086, in get_connection
    connection.connect()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 276, in connect
    self.on_connect()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 379, in on_connect
    self.read_response()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 500, in read_response
    response = self._parser.read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/dist-packages/redis/_parsers/resp2.py", line 15, in read_response
    result = self._read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/dist-packages/redis/_parsers/resp2.py", line 38, in _read_response
    raise error
redis.exceptions.AuthenticationError: Authentication required.
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.username = %s
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('admin',)
2026-01-10 00:45:21 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - [cached since 114.7s ago] (1,)
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - [cached since 114.7s ago] ()
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - [cached since 114.7s ago] (1,)
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - [cached since 114.7s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - [cached since 114.7s ago] (1,)
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - [cached since 114.7s ago] ()
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - [cached since 114.7s ago] ()
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - [cached since 114.7s ago] (1,)
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - [cached since 114.7s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - [cached since 114.7s ago] ()
2026-01-10 00:45:21 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - [cached since 124.7s ago] (1,)
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - [cached since 124.7s ago] (1,)
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - [cached since 118.8s ago] {}
2026-01-10 00:45:31 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - [cached since 118.8s ago] {}
2026-01-10 00:45:31 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:45:33 - sqlalchemy.engine.Engine - INFO - [cached since 126.6s ago] (1,)
2026-01-10 00:45:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:33 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 00:45:33 - sqlalchemy.engine.Engine - INFO - [cached since 119.4s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 00:45:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:33 - main - ERROR - 未处理的异常: Authentication required.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/cors.py", line 91, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/cors.py", line 146, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/usr/local/lib/python3.10/dist-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/usr/local/lib/python3.10/dist-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/usr/local/lib/python3.10/dist-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.10/dist-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.10/dist-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.10/dist-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
  File "/root/aioffer/backend/routers/external_systems.py", line 300, in get_system_access
    redis_client.setex(cache_key, 3600, json.dumps(token_data, ensure_ascii=False))
  File "/usr/local/lib/python3.10/dist-packages/redis/commands/core.py", line 2366, in setex
    return self.execute_command("SETEX", name, time, value)
  File "/usr/local/lib/python3.10/dist-packages/redis/client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 1086, in get_connection
    connection.connect()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 276, in connect
    self.on_connect()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 379, in on_connect
    self.read_response()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 500, in read_response
    response = self._parser.read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/dist-packages/redis/_parsers/resp2.py", line 15, in read_response
    result = self._read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/dist-packages/redis/_parsers/resp2.py", line 38, in _read_response
    raise error
redis.exceptions.AuthenticationError: Authentication required.
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - [cached since 134s ago] (1,)
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] (2,)
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] (2, 0, 10)
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - [cached since 134s ago] (1,)
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.01166s ago] (2,)
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] (2, 0, 10)
2026-01-10 00:45:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - [cached since 137.6s ago] (1,)
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - [cached since 137.6s ago] (1,)
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ()
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.001569s ago] ()
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] (0, 10)
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] (0, 10)
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:44 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - [cached since 141.8s ago] (1,)
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - [cached since 141.8s ago] (1,)
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ()
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.001639s ago] ()
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] (0, 10)
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] (0, 10)
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s, %s)
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] (1, 2, 3)
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s, %s)
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - [cached since 0.001528s ago] (1, 2, 3)
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:48 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - [cached since 144.3s ago] (1,)
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - [cached since 144.3s ago] (1,)
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] {}
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - [cached since 0.00224s ago] {}
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] {'param_1': 0, 'param_2': 10}
2026-01-10 00:45:51 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - [cached since 0.002463s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:51 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:45:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.username = %s
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - [cached since 83.96s ago] ('admin',)
2026-01-10 00:46:45 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - [cached since 198.6s ago] (1,)
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - [cached since 198.6s ago] ()
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - [cached since 198.6s ago] (1,)
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - [cached since 198.6s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - [cached since 198.6s ago] ()
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - [cached since 198.6s ago] (1,)
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - [cached since 198.6s ago] ()
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - [cached since 198.6s ago] (1,)
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - [cached since 198.6s ago] (datetime.date(2026, 1, 10),)
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - [cached since 198.6s ago] ()
2026-01-10 00:46:45 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:00:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:00:22 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.username = %s
2026-01-10 01:00:22 - sqlalchemy.engine.Engine - INFO - [cached since 901.8s ago] ('admin',)
2026-01-10 01:00:23 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - [cached since 1016s ago] (1,)
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - [cached since 1016s ago] ()
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - [cached since 1016s ago] (1,)
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - [cached since 1016s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - [cached since 1016s ago] ()
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] (1,)
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] ()
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] (1,)
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - [cached since 1017s ago] ()
2026-01-10 01:00:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:00:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:00:39 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.username = %s
2026-01-10 01:00:39 - sqlalchemy.engine.Engine - INFO - [cached since 918.5s ago] ('admin',)
2026-01-10 01:00:39 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 01:00:39 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 1033s ago] (1,)
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 1033s ago] ()
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 1033s ago] (1,)
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 1033s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 1033s ago] ()
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 1033s ago] (1,)
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 1033s ago] ()
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 1033s ago] (1,)
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 1033s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - [cached since 1033s ago] ()
2026-01-10 01:00:40 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:01:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:01:08 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 01:01:08 - sqlalchemy.engine.Engine - INFO - [cached since 1062s ago] ('email', 'admin@example.com')
2026-01-10 01:01:08 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 01:01:08 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - [cached since 1062s ago] (1,)
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - [cached since 1062s ago] ()
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - [cached since 1062s ago] (1,)
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - [cached since 1062s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - [cached since 1062s ago] ()
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - [cached since 1062s ago] (1,)
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - [cached since 1062s ago] ()
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - [cached since 1062s ago] (1,)
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - [cached since 1062s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - [cached since 1062s ago] ()
2026-01-10 01:01:09 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:12:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:12:54 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.username = %s
2026-01-10 01:12:54 - sqlalchemy.engine.Engine - INFO - [cached since 1654s ago] ('admin',)
2026-01-10 01:12:55 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - [cached since 1768s ago] (1,)
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - [cached since 1768s ago] ()
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - [cached since 1768s ago] (1,)
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - [cached since 1768s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - [cached since 1768s ago] ()
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - [cached since 1769s ago] (1,)
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - [cached since 1769s ago] ()
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - [cached since 1769s ago] (1,)
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - [cached since 1769s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - [cached since 1769s ago] ()
2026-01-10 01:12:55 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - [cached since 1771s ago] (1,)
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - [cached since 1771s ago] (1,)
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - [cached since 1637s ago] (2,)
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - [cached since 1637s ago] (2,)
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - [cached since 1637s ago] (2, 0, 10)
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - [cached since 1637s ago] (2, 0, 10)
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:12:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - [cached since 1776s ago] (1,)
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - [cached since 1771s ago] {}
2026-01-10 01:13:03 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - [cached since 1777s ago] (1,)
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - [cached since 1771s ago] {}
2026-01-10 01:13:03 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:13:03 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:13:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:13:05 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:13:05 - sqlalchemy.engine.Engine - INFO - [cached since 1778s ago] (1,)
2026-01-10 01:13:05 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:13:05 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 01:13:05 - sqlalchemy.engine.Engine - INFO - [cached since 1771s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 01:13:05 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:13:05 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:13:05 - main - ERROR - 未处理的异常: Authentication required.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/usr/local/lib/python3.10/dist-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/usr/local/lib/python3.10/dist-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/usr/local/lib/python3.10/dist-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.10/dist-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.10/dist-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.10/dist-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
  File "/root/aioffer/backend/routers/external_systems.py", line 300, in get_system_access
    redis_client.setex(cache_key, 3600, json.dumps(token_data, ensure_ascii=False))
  File "/usr/local/lib/python3.10/dist-packages/redis/commands/core.py", line 2366, in setex
    return self.execute_command("SETEX", name, time, value)
  File "/usr/local/lib/python3.10/dist-packages/redis/client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 1086, in get_connection
    connection.connect()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 276, in connect
    self.on_connect()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 379, in on_connect
    self.read_response()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 500, in read_response
    response = self._parser.read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/dist-packages/redis/_parsers/resp2.py", line 15, in read_response
    result = self._read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/dist-packages/redis/_parsers/resp2.py", line 38, in _read_response
    raise error
redis.exceptions.AuthenticationError: Authentication required.
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - [cached since 1848s ago] (1,)
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - [cached since 1706s ago] ()
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - [cached since 1706s ago] (0, 10)
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s, %s)
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - [cached since 1706s ago] (1, 2, 3)
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - [cached since 1848s ago] (1,)
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - [cached since 1706s ago] ()
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - [cached since 1706s ago] (0, 10)
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s, %s)
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - [cached since 1706s ago] (1, 2, 3)
2026-01-10 01:14:14 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:07 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 01:15:07 - sqlalchemy.engine.Engine - INFO - [cached since 1901s ago] ('email', 'admin@example.com')
2026-01-10 01:15:08 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - [cached since 1901s ago] (1,)
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - [cached since 1901s ago] ()
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - [cached since 1901s ago] (1,)
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - [cached since 1901s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - [cached since 1901s ago] ()
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - [cached since 1901s ago] (1,)
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - [cached since 1901s ago] ()
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - [cached since 1901s ago] (1,)
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - [cached since 1901s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - [cached since 1901s ago] ()
2026-01-10 01:15:08 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - [cached since 1905s ago] (1,)
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - [cached since 1768s ago] ()
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - [cached since 1768s ago] (0, 10)
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - [cached since 1905s ago] (1,)
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - [cached since 1768s ago] ()
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - [cached since 1768s ago] (0, 10)
2026-01-10 01:15:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - [cached since 1916s ago] (1,)
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - [cached since 1916s ago] ()
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - [cached since 1916s ago] (1,)
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - [cached since 1916s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - [cached since 1916s ago] ()
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - [cached since 1916s ago] (1,)
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - [cached since 1916s ago] ()
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - [cached since 1916s ago] (1,)
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - [cached since 1916s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - [cached since 1916s ago] ()
2026-01-10 01:15:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - [cached since 1927s ago] (1,)
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - [cached since 1785s ago] ()
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - [cached since 1785s ago] (0, 10)
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s, %s)
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - [cached since 1785s ago] (1, 2, 3)
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - [cached since 1927s ago] (1,)
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - [cached since 1785s ago] ()
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - [cached since 1785s ago] (0, 10)
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s, %s)
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - [cached since 1785s ago] (1, 2, 3)
2026-01-10 01:15:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - [cached since 1929s ago] (1,)
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - [cached since 1923s ago] {}
2026-01-10 01:15:36 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - [cached since 1929s ago] (1,)
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - [cached since 1923s ago] {}
2026-01-10 01:15:36 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - [cached since 1932s ago] (1,)
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - [cached since 1788s ago] {}
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - [cached since 1788s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 01:15:39 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - [cached since 1933s ago] (1,)
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - [cached since 1788s ago] {}
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - [cached since 1788s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 01:15:39 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:39 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - [cached since 1940s ago] (1,)
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - [cached since 1934s ago] {}
2026-01-10 01:15:47 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - [cached since 1940s ago] (1,)
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - [cached since 1934s ago] {}
2026-01-10 01:15:47 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:48 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:15:48 - sqlalchemy.engine.Engine - INFO - [cached since 1941s ago] (1,)
2026-01-10 01:15:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:15:48 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 01:15:48 - sqlalchemy.engine.Engine - INFO - [cached since 1934s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 01:15:48 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:48 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:15:48 - main - ERROR - 未处理的异常: Authentication required.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py", line 79, in __call__
    raise exc
  File "/usr/local/lib/python3.10/dist-packages/starlette/middleware/exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "/usr/local/lib/python3.10/dist-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
    raise e
  File "/usr/local/lib/python3.10/dist-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 276, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.10/dist-packages/starlette/routing.py", line 66, in app
    response = await func(request)
  File "/usr/local/lib/python3.10/dist-packages/fastapi/routing.py", line 274, in app
    raw_response = await run_endpoint_function(
  File "/usr/local/lib/python3.10/dist-packages/fastapi/routing.py", line 193, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
  File "/usr/local/lib/python3.10/dist-packages/starlette/concurrency.py", line 41, in run_in_threadpool
    return await anyio.to_thread.run_sync(func, *args)
  File "/usr/local/lib/python3.10/dist-packages/anyio/to_thread.py", line 33, in run_sync
    return await get_asynclib().run_sync_in_worker_thread(
  File "/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py", line 877, in run_sync_in_worker_thread
    return await future
  File "/usr/local/lib/python3.10/dist-packages/anyio/_backends/_asyncio.py", line 807, in run
    result = context.run(func, *args)
  File "/root/aioffer/backend/routers/external_systems.py", line 300, in get_system_access
    redis_client.setex(cache_key, 3600, json.dumps(token_data, ensure_ascii=False))
  File "/usr/local/lib/python3.10/dist-packages/redis/commands/core.py", line 2366, in setex
    return self.execute_command("SETEX", name, time, value)
  File "/usr/local/lib/python3.10/dist-packages/redis/client.py", line 533, in execute_command
    conn = self.connection or pool.get_connection(command_name, **options)
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 1086, in get_connection
    connection.connect()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 276, in connect
    self.on_connect()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 379, in on_connect
    self.read_response()
  File "/usr/local/lib/python3.10/dist-packages/redis/connection.py", line 500, in read_response
    response = self._parser.read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/dist-packages/redis/_parsers/resp2.py", line 15, in read_response
    result = self._read_response(disable_decoding=disable_decoding)
  File "/usr/local/lib/python3.10/dist-packages/redis/_parsers/resp2.py", line 38, in _read_response
    raise error
redis.exceptions.AuthenticationError: Authentication required.
2026-01-10 01:16:55 - main - INFO - 应用正在关闭...
2026-01-10 01:16:56 - main - INFO - 正在初始化数据库...
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`users`
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_auths`
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`members`
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_roles`
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`role_permissions`
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`roles`
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`permissions`
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`menus`
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`orders`
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`point_transactions`
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`external_systems`
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`system_configs`
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:16:56 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 01:16:56 - main - INFO - 数据库初始化完成
2026-01-10 01:17:14 - main - INFO - 应用正在关闭...
2026-01-10 01:17:16 - main - INFO - 正在初始化数据库...
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`users`
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_auths`
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`members`
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_roles`
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`role_permissions`
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`roles`
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`permissions`
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`menus`
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`orders`
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`point_transactions`
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`external_systems`
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`system_configs`
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:17:16 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 01:17:16 - main - INFO - 数据库初始化完成
2026-01-10 01:17:57 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 01:17:57 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 01:17:57 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 01:17:57 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 01:17:57 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 01:17:57 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 01:17:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:17:57 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 01:17:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] {'id_1': 1, 'param_1': 1}
2026-01-10 01:17:57 - routers.external_systems - INFO - 外部系统 verify 失败 system_id=1 reason=token_invalid duration_ms=35
2026-01-10 01:17:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] (1,)
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] {}
2026-01-10 01:20:21 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.007246s ago] (1,)
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - [cached since 0.009641s ago] {}
2026-01-10 01:20:21 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:20:21 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:20:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:20:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:20:23 - sqlalchemy.engine.Engine - INFO - [cached since 1.847s ago] (1,)
2026-01-10 01:20:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:20:23 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 01:20:23 - sqlalchemy.engine.Engine - INFO - [cached since 145.8s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 01:20:23 - routers.external_systems - INFO - 外部系统 access_token 发放成功 user_id=1 system_id=1 duration_ms=2
2026-01-10 01:20:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:20:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:20:24 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:20:24 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:20:24 - sqlalchemy.engine.Engine - INFO - [cached since 2.188s ago] (1,)
2026-01-10 01:20:24 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:20:24 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 01:20:24 - sqlalchemy.engine.Engine - INFO - [cached since 146.2s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 01:20:24 - routers.external_systems - INFO - 用户 admin 获取外部系统 曼彻斯特大学算分系统 的集成配置
2026-01-10 01:20:24 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:20:24 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - [cached since 33.04s ago] (1,)
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - [cached since 177s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 01:20:54 - routers.external_systems - INFO - 外部系统 access_token 发放成功 user_id=1 system_id=1 duration_ms=2
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - [cached since 33.07s ago] (1,)
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - [cached since 177.1s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 01:20:54 - routers.external_systems - INFO - 用户 admin 获取外部系统 曼彻斯特大学算分系统 的集成配置
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:20:54 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:31 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:31 - sqlalchemy.engine.Engine - INFO - [cached since 69.46s ago] (1,)
2026-01-10 01:21:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:31 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 01:21:31 - sqlalchemy.engine.Engine - INFO - [cached since 69.46s ago] {}
2026-01-10 01:21:31 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 01:21:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - [cached since 71.36s ago] (1,)
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] {}
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] {'param_1': 0, 'param_2': 10}
2026-01-10 01:21:33 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - [cached since 71.38s ago] (1,)
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - [cached since 0.0136s ago] {}
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - [cached since 0.01288s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 01:21:33 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - [cached since 74.47s ago] (1,)
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ()
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] (1,)
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] (datetime.date(2026, 1, 10),)
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ()
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - [cached since 74.48s ago] (1,)
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - [cached since 0.01525s ago] ()
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - [cached since 0.01517s ago] (1,)
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - [cached since 0.01475s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - [cached since 0.0142s ago] ()
2026-01-10 01:21:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - [cached since 76.04s ago] (1,)
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ()
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] (0, 10)
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - [cached since 76.06s ago] (1,)
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - [cached since 0.01824s ago] ()
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] (0, 10)
2026-01-10 01:21:37 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - [cached since 79.21s ago] (1,)
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at 
FROM point_transactions ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ()
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at 
FROM point_transactions ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] (0, 10)
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - [cached since 79.22s ago] (1,)
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at 
FROM point_transactions ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.01314s ago] ()
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at 
FROM point_transactions ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (0, 10)
2026-01-10 01:21:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [cached since 83.63s ago] (1,)
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ()
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [cached since 83.63s ago] (1,)
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [generated in 0.00038s] ()
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [generated in 0.00045s] (0, 10)
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ()
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] (1,)
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [cached since 0.003768s ago] (2,)
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [cached since 83.66s ago] (1,)
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [cached since 0.03109s ago] ()
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] (0, 10)
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [cached since 83.67s ago] (1,)
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [cached since 0.03311s ago] ()
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ()
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [cached since 0.02659s ago] (1,)
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - [cached since 0.02836s ago] (2,)
2026-01-10 01:21:45 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - [cached since 88.52s ago] (1,)
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - [cached since 88.52s ago] {}
2026-01-10 01:21:50 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - [cached since 88.53s ago] (1,)
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - [cached since 88.53s ago] {}
2026-01-10 01:21:50 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:50 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - [cached since 90.7s ago] (1,)
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - [generated in 0.00030s] (2,)
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] (2, 0, 10)
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - [cached since 90.71s ago] (1,)
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - [cached since 0.01472s ago] (2,)
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] (2, 0, 10)
2026-01-10 01:21:52 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - [cached since 95.42s ago] (1,)
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - [cached since 19.38s ago] ()
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - [cached since 19.36s ago] (0, 10)
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - [cached since 95.43s ago] (1,)
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - [cached since 19.39s ago] ()
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - [cached since 19.37s ago] (0, 10)
2026-01-10 01:21:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - [cached since 96.75s ago] (1,)
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - [cached since 22.29s ago] ()
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - [cached since 22.29s ago] (1,)
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - [cached since 22.29s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - [cached since 22.29s ago] ()
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - [cached since 96.77s ago] (1,)
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - [cached since 22.3s ago] ()
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - [cached since 22.3s ago] (1,)
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - [cached since 22.3s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - [cached since 22.3s ago] ()
2026-01-10 01:21:58 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:45:01 - main - INFO - 应用正在关闭...
2026-01-10 01:45:02 - main - INFO - 正在初始化数据库...
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`users`
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_auths`
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`email_verification_codes`
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`login_logs`
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`members`
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_roles`
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`role_permissions`
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`roles`
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`permissions`
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`menus`
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`orders`
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`point_transactions`
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`external_systems`
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`system_configs`
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE email_verification_codes (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	email VARCHAR(100) NOT NULL COMMENT '邮箱', 
	purpose VARCHAR(30) NOT NULL COMMENT '用途: register', 
	code_hash VARCHAR(255) NOT NULL COMMENT '验证码哈希', 
	expires_at DATETIME NOT NULL COMMENT '过期时间', 
	used_at DATETIME COMMENT '使用时间', 
	ip VARCHAR(45) COMMENT '请求IP', 
	user_agent TEXT COMMENT 'User-Agent', 
	created_at DATETIME NOT NULL DEFAULT now(), 
	PRIMARY KEY (id)
)


2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_email_verification_codes_email ON email_verification_codes (email)
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_email_verification_codes_purpose ON email_verification_codes (purpose)
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_email_verification_codes_id ON email_verification_codes (id)
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE login_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id INTEGER, 
	auth_type VARCHAR(20) NOT NULL COMMENT '登录类型: email, username', 
	identifier VARCHAR(100) COMMENT '登录标识: 邮箱或用户名', 
	ip VARCHAR(45) COMMENT '登录IP', 
	user_agent TEXT COMMENT 'User-Agent', 
	success BOOL NOT NULL COMMENT '是否成功', 
	failure_reason VARCHAR(255) COMMENT '失败原因', 
	created_at DATETIME NOT NULL DEFAULT now(), 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE SET NULL
)


2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_login_logs_id ON login_logs (id)
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_login_logs_identifier ON login_logs (identifier)
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_login_logs_user_id ON login_logs (user_id)
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_login_logs_auth_type ON login_logs (auth_type)
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_login_logs_success ON login_logs (success)
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_login_logs_ip ON login_logs (ip)
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - [no key 0.00054s] ()
2026-01-10 01:45:02 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 01:45:02 - main - INFO - 数据库初始化完成
2026-01-10 01:45:08 - main - INFO - 应用正在关闭...
2026-01-10 01:45:09 - main - INFO - 正在初始化数据库...
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`users`
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_auths`
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`email_verification_codes`
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`login_logs`
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`members`
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_roles`
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`role_permissions`
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`roles`
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`permissions`
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`menus`
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`orders`
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`point_transactions`
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`external_systems`
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`system_configs`
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:09 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 01:45:09 - main - INFO - 数据库初始化完成
2026-01-10 01:45:15 - main - INFO - 应用正在关闭...
2026-01-10 01:45:16 - main - INFO - 正在初始化数据库...
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`users`
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_auths`
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`email_verification_codes`
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`login_logs`
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`members`
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_roles`
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`role_permissions`
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`roles`
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`permissions`
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`menus`
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`orders`
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`point_transactions`
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`external_systems`
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`system_configs`
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:16 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 01:45:16 - main - INFO - 数据库初始化完成
2026-01-10 01:45:24 - main - INFO - 应用正在关闭...
2026-01-10 01:45:25 - main - INFO - 正在初始化数据库...
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`users`
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_auths`
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`email_verification_codes`
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`login_logs`
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`members`
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_roles`
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`role_permissions`
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`roles`
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`permissions`
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`menus`
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`orders`
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`point_transactions`
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`external_systems`
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`system_configs`
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:25 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 01:45:25 - main - INFO - 数据库初始化完成
2026-01-10 01:45:30 - main - INFO - 应用正在关闭...
2026-01-10 01:45:31 - main - INFO - 正在初始化数据库...
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`users`
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_auths`
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`email_verification_codes`
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`login_logs`
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`members`
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_roles`
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`role_permissions`
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`roles`
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`permissions`
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`menus`
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`orders`
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`point_transactions`
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`external_systems`
2026-01-10 01:45:31 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:32 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`system_configs`
2026-01-10 01:45:32 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:45:32 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 01:45:32 - main - INFO - 数据库初始化完成
2026-01-10 01:46:16 - main - INFO - 应用正在关闭...
2026-01-10 01:46:18 - main - INFO - 正在初始化数据库...
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`users`
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_auths`
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`email_verification_codes`
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`login_logs`
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`members`
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_roles`
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`role_permissions`
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`roles`
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`permissions`
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`menus`
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`orders`
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`point_transactions`
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`external_systems`
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`system_configs`
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 01:46:18 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 01:46:18 - main - INFO - 数据库初始化完成
2026-01-10 01:57:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:57:51 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 01:57:51 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] ('email', 'admin@example.com')
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] (1, 'email', 'admin@example.com', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', 1, None)
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 01:57:52 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] (1,)
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] (1,)
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] (datetime.date(2026, 1, 10),)
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ()
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - [cached since 0.01703s ago] (1,)
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - [cached since 0.01629s ago] ()
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - [cached since 0.01597s ago] (1,)
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - [cached since 0.01488s ago] (datetime.date(2026, 1, 10),)
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - [cached since 0.0142s ago] ()
2026-01-10 01:57:52 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - [cached since 5.807s ago] (1,)
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] {}
2026-01-10 01:57:58 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - [cached since 5.824s ago] (1,)
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - [cached since 0.01202s ago] {}
2026-01-10 01:57:58 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:57:58 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - [cached since 7.457s ago] (1,)
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] {'id_1': 1, 'param_1': 1}
2026-01-10 01:57:59 - routers.external_systems - INFO - 外部系统 access_token 发放成功 user_id=1 system_id=1 duration_ms=1
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - [cached since 7.473s ago] (1,)
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - [cached since 0.01669s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 01:57:59 - routers.external_systems - INFO - 用户 admin 获取外部系统 曼彻斯特大学算分系统 的集成配置
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 01:57:59 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:22:15 - main - INFO - 正在初始化数据库...
2026-01-10 10:24:53 - main - INFO - 正在初始化数据库...
2026-01-10 10:40:12 - main - INFO - 正在初始化数据库...
2026-01-10 10:41:41 - main - INFO - 正在初始化数据库...
2026-01-10 10:45:06 - main - INFO - 正在初始化数据库...
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`users`
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_auths`
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`email_verification_codes`
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`login_logs`
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`members`
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_roles`
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`role_permissions`
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`roles`
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`permissions`
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`menus`
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`orders`
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`point_transactions`
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`external_systems`
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`system_configs`
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	username VARCHAR(50) NOT NULL COMMENT '用户名', 
	email VARCHAR(100) COMMENT '邮箱', 
	password_hash VARCHAR(255) COMMENT '密码哈希', 
	full_name VARCHAR(100) COMMENT '全名', 
	avatar_url VARCHAR(255) COMMENT '头像URL', 
	phone VARCHAR(20) COMMENT '手机号', 
	status INTEGER NOT NULL COMMENT '状态: 1正常, 2禁用, 3删除', 
	user_type INTEGER NOT NULL COMMENT '用户类型: 1普通用户, 2会员, 3管理员', 
	created_at DATETIME NOT NULL DEFAULT now(), 
	updated_at DATETIME NOT NULL DEFAULT now(), 
	PRIMARY KEY (id)
)


2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_id ON users (id)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_username ON users (username)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_email ON users (email)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_users_status ON users (status)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE email_verification_codes (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	email VARCHAR(100) NOT NULL COMMENT '邮箱', 
	purpose VARCHAR(30) NOT NULL COMMENT '用途: register', 
	code_hash VARCHAR(255) NOT NULL COMMENT '验证码哈希', 
	expires_at DATETIME NOT NULL COMMENT '过期时间', 
	used_at DATETIME COMMENT '使用时间', 
	ip VARCHAR(45) COMMENT '请求IP', 
	user_agent TEXT COMMENT 'User-Agent', 
	created_at DATETIME NOT NULL DEFAULT now(), 
	PRIMARY KEY (id)
)


2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_email_verification_codes_email ON email_verification_codes (email)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_email_verification_codes_purpose ON email_verification_codes (purpose)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00013s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_email_verification_codes_id ON email_verification_codes (id)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE roles (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	name VARCHAR(50) NOT NULL COMMENT '角色名称', 
	description TEXT COMMENT '角色描述', 
	is_system BOOL NOT NULL COMMENT '是否系统角色', 
	created_at DATETIME NOT NULL DEFAULT now(), 
	PRIMARY KEY (id)
)


2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_roles_id ON roles (id)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00013s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_roles_name ON roles (name)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00013s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE permissions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	name VARCHAR(100) NOT NULL COMMENT '权限名称', 
	code VARCHAR(100) NOT NULL COMMENT '权限代码', 
	resource VARCHAR(50) NOT NULL COMMENT '资源类型', 
	action VARCHAR(50) NOT NULL COMMENT '操作类型', 
	description TEXT COMMENT '权限描述', 
	created_at DATETIME NOT NULL DEFAULT now(), 
	PRIMARY KEY (id), 
	UNIQUE (name)
)


2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_permissions_id ON permissions (id)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_permissions_code ON permissions (code)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE external_systems (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	name VARCHAR(50) NOT NULL COMMENT '系统名称', 
	system_type VARCHAR(20) NOT NULL COMMENT '系统类型: api, page, iframe', 
	page_url VARCHAR(255) COMMENT '页面URL', 
	api_key VARCHAR(255) COMMENT 'API密钥', 
	api_secret VARCHAR(255) COMMENT 'API密钥', 
	endpoint_url VARCHAR(255) COMMENT 'API端点', 
	config JSON COMMENT '配置信息', 
	is_active BOOL NOT NULL COMMENT '是否启用', 
	created_at DATETIME NOT NULL DEFAULT now(), 
	updated_at DATETIME NOT NULL DEFAULT now(), 
	PRIMARY KEY (id)
)


2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_external_systems_id ON external_systems (id)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00014s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE system_configs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	config_key VARCHAR(100) NOT NULL COMMENT '配置键', 
	config_value TEXT COMMENT '配置值', 
	description TEXT COMMENT '配置描述', 
	created_at DATETIME NOT NULL DEFAULT now(), 
	updated_at DATETIME NOT NULL DEFAULT now(), 
	PRIMARY KEY (id)
)


2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00032s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_system_configs_config_key ON system_configs (config_key)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_system_configs_id ON system_configs (id)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_auths (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id INTEGER NOT NULL, 
	auth_type VARCHAR(20) NOT NULL COMMENT '认证类型: email, wechat, wechat_qr, phone', 
	auth_key VARCHAR(100) COMMENT '认证标识: 邮箱、手机号、微信openid等', 
	auth_secret VARCHAR(255) COMMENT '认证密钥: 密码、微信unionid等', 
	wechat_nickname VARCHAR(100) COMMENT '微信昵称', 
	wechat_avatar VARCHAR(255) COMMENT '微信头像', 
	is_verified BOOL NOT NULL COMMENT '是否已验证', 
	verified_at DATETIME COMMENT '验证时间', 
	created_at DATETIME NOT NULL DEFAULT now(), 
	updated_at DATETIME NOT NULL DEFAULT now(), 
	PRIMARY KEY (id), 
	CONSTRAINT unique_auth UNIQUE (auth_type, auth_key), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE
)


2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_user_auths_id ON user_auths (id)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE login_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id INTEGER, 
	auth_type VARCHAR(20) NOT NULL COMMENT '登录类型: email, username', 
	identifier VARCHAR(100) COMMENT '登录标识: 邮箱或用户名', 
	ip VARCHAR(45) COMMENT '登录IP', 
	user_agent TEXT COMMENT 'User-Agent', 
	success BOOL NOT NULL COMMENT '是否成功', 
	failure_reason VARCHAR(255) COMMENT '失败原因', 
	created_at DATETIME NOT NULL DEFAULT now(), 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE SET NULL
)


2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_login_logs_success ON login_logs (success)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_login_logs_auth_type ON login_logs (auth_type)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00021s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_login_logs_user_id ON login_logs (user_id)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_login_logs_id ON login_logs (id)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_login_logs_identifier ON login_logs (identifier)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_login_logs_ip ON login_logs (ip)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00018s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE members (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id INTEGER NOT NULL, 
	member_level INTEGER NOT NULL COMMENT '会员等级', 
	points INTEGER NOT NULL COMMENT '积分点数', 
	balance NUMERIC(10, 2) NOT NULL COMMENT '余额', 
	expired_at DATETIME COMMENT '会员到期时间', 
	created_at DATETIME NOT NULL DEFAULT now(), 
	updated_at DATETIME NOT NULL DEFAULT now(), 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE
)


2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00026s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_members_id ON members (id)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_roles (
	user_id INTEGER NOT NULL, 
	role_id INTEGER NOT NULL, 
	PRIMARY KEY (user_id, role_id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE, 
	FOREIGN KEY(role_id) REFERENCES roles (id) ON DELETE CASCADE
)


2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE role_permissions (
	role_id INTEGER NOT NULL, 
	permission_id INTEGER NOT NULL, 
	PRIMARY KEY (role_id, permission_id), 
	FOREIGN KEY(role_id) REFERENCES roles (id) ON DELETE CASCADE, 
	FOREIGN KEY(permission_id) REFERENCES permissions (id) ON DELETE CASCADE
)


2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00015s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE menus (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	name VARCHAR(50) NOT NULL COMMENT '菜单名称', 
	path VARCHAR(100) COMMENT '菜单路径', 
	component VARCHAR(100) COMMENT '组件名称', 
	icon VARCHAR(50) COMMENT '图标', 
	parent_id INTEGER COMMENT '父菜单ID', 
	sort_order INTEGER NOT NULL COMMENT '排序', 
	is_visible BOOL NOT NULL COMMENT '是否可见', 
	permission_id INTEGER COMMENT '关联权限ID', 
	created_at DATETIME NOT NULL DEFAULT now(), 
	PRIMARY KEY (id), 
	FOREIGN KEY(parent_id) REFERENCES menus (id) ON DELETE CASCADE, 
	FOREIGN KEY(permission_id) REFERENCES permissions (id) ON DELETE SET NULL
)


2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00013s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_menus_id ON menus (id)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00011s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE orders (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	order_no VARCHAR(32) NOT NULL COMMENT '订单号', 
	user_id INTEGER NOT NULL, 
	product_id INTEGER COMMENT '产品ID', 
	product_type VARCHAR(20) NOT NULL COMMENT '产品类型: points, member, service', 
	amount NUMERIC(10, 2) NOT NULL COMMENT '订单金额', 
	quantity INTEGER NOT NULL COMMENT '数量', 
	status INTEGER NOT NULL COMMENT '状态: 1待支付, 2已支付, 3已取消, 4已退款', 
	payment_method VARCHAR(20) COMMENT '支付方式', 
	payment_time DATETIME COMMENT '支付时间', 
	description TEXT COMMENT '订单描述', 
	created_at DATETIME NOT NULL DEFAULT now(), 
	updated_at DATETIME NOT NULL DEFAULT now(), 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE
)


2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_orders_user_id ON orders (user_id)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_orders_status ON orders (status)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00011s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_orders_id ON orders (id)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00012s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_orders_order_no ON orders (order_no)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00016s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE point_transactions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id INTEGER NOT NULL, 
	type INTEGER NOT NULL COMMENT '交易类型: 1充值, 2消费, 3退款', 
	points INTEGER NOT NULL COMMENT '交易点数', 
	balance_after INTEGER NOT NULL COMMENT '交易后余额', 
	amount NUMERIC(10, 2) COMMENT '金额（充值时）', 
	description TEXT COMMENT '交易描述', 
	related_id INTEGER COMMENT '关联ID（订单ID等）', 
	related_type VARCHAR(50) COMMENT '关联类型', 
	created_at DATETIME NOT NULL DEFAULT now(), 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id) ON DELETE CASCADE
)


2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00025s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_point_transactions_user_id ON point_transactions (user_id)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_point_transactions_id ON point_transactions (id)
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - [no key 0.00017s] ()
2026-01-10 10:45:06 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 10:45:06 - main - INFO - 数据库初始化完成
2026-01-10 10:45:24 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:45:24 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 10:45:24 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] ('email', 'admin@example.com')
2026-01-10 10:45:24 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-10 10:45:24 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] (None, 'email', 'admin@example.com', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', 0, '邮箱或密码错误')
2026-01-10 10:45:24 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 10:45:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:45:39 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.username = %s
2026-01-10 10:45:39 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ('admin',)
2026-01-10 10:45:39 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-10 10:45:39 - sqlalchemy.engine.Engine - INFO - [cached since 14.35s ago] (None, 'username', 'admin', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', 0, '用户名或密码错误')
2026-01-10 10:45:39 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 10:47:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:31 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 10:47:31 - sqlalchemy.engine.Engine - INFO - [cached since 126.9s ago] ('email', 'admin@example.com')
2026-01-10 10:47:31 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-10 10:47:31 - sqlalchemy.engine.Engine - INFO - [cached since 127.2s ago] (1, 'email', 'admin@example.com', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', 1, None)
2026-01-10 10:47:31 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 10:47:31 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (1,)
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ()
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (1,)
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] (datetime.date(2026, 1, 10),)
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ()
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.0175s ago] (1,)
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.01639s ago] ()
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.01605s ago] (1,)
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.01561s ago] (datetime.date(2026, 1, 10),)
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.01518s ago] ()
2026-01-10 10:47:32 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - [cached since 2.815s ago] (1,)
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ()
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] (0, 10)
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - [cached since 2.844s ago] (1,)
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.02786s ago] ()
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] (0, 10)
2026-01-10 10:47:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - [cached since 4.66s ago] (1,)
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] (2,)
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] (2, 0, 10)
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - [cached since 4.675s ago] (1,)
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - [cached since 0.01551s ago] (2,)
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] (2, 0, 10)
2026-01-10 10:47:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - [cached since 5.777s ago] (1,)
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] {}
2026-01-10 10:47:37 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 0 个系统
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - [cached since 5.791s ago] (1,)
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - [cached since 0.01035s ago] {}
2026-01-10 10:47:37 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 0 个系统
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:37 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [cached since 7.485s ago] (1,)
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [generated in 0.00028s] ()
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] (0, 10)
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [cached since 7.497s ago] (1,)
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ()
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ()
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] (1,)
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.001597s ago] (2,)
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [cached since 7.511s ago] (1,)
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.02303s ago] ()
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] (0, 10)
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [cached since 7.517s ago] (1,)
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.01884s ago] ()
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ()
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.0177s ago] (1,)
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - [cached since 0.01873s ago] (2,)
2026-01-10 10:47:39 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - [cached since 9.45s ago] (1,)
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ()
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (0, 10)
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s)
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] (1,)
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - [cached since 9.478s ago] (1,)
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.02793s ago] ()
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (0, 10)
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s)
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - [cached since 0.02524s ago] (1,)
2026-01-10 10:47:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:43 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:43 - sqlalchemy.engine.Engine - INFO - [cached since 11.49s ago] (1,)
2026-01-10 10:47:43 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 10:47:43 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
2026-01-10 10:47:43 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:43 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:43 - sqlalchemy.engine.Engine - INFO - [cached since 11.51s ago] (1,)
2026-01-10 10:47:43 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 10:47:43 - sqlalchemy.engine.Engine - INFO - [cached since 0.01218s ago] ()
2026-01-10 10:47:43 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - [cached since 13.97s ago] (1,)
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] {}
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] {'param_1': 0, 'param_2': 10}
2026-01-10 10:47:46 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 0 条记录
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - [cached since 13.98s ago] (1,)
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - [cached since 0.01402s ago] {}
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - [cached since 0.01355s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 10:47:46 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 0 条记录
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:47:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - [cached since 51.05s ago] (1,)
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.name = %(name_1)s 
 LIMIT %(param_1)s
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] {'name_1': '曼彻斯特大学研究生专业入学评估系统', 'param_1': 1}
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - INSERT INTO external_systems (name, system_type, page_url, api_key, api_secret, endpoint_url, config, is_active) VALUES (%(name)s, %(system_type)s, %(page_url)s, %(api_key)s, %(api_secret)s, %(endpoint_url)s, %(config)s, %(is_active)s)
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] {'name': '曼彻斯特大学研究生专业入学评估系统', 'system_type': 'page', 'page_url': 'https://c29rc6b3zb.coze.site/', 'api_key': None, 'api_secret': None, 'endpoint_url': None, 'config': '{}', 'is_active': 1}
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id, external_systems.name, external_systems.system_type, external_systems.page_url, external_systems.api_key, external_systems.api_secret, external_systems.endpoint_url, external_systems.config, external_systems.is_active, external_systems.created_at, external_systems.updated_at 
FROM external_systems 
WHERE external_systems.id = %(pk_1)s
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] {'pk_1': 1}
2026-01-10 10:48:23 - routers.external_systems - INFO - 用户 admin 创建外部系统: 曼彻斯特大学研究生专业入学评估系统
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - [cached since 51.08s ago] (1,)
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - [cached since 37.11s ago] {}
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - [cached since 37.11s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 10:48:23 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - [cached since 53.9s ago] (1,)
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - [cached since 48.12s ago] {}
2026-01-10 10:48:26 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - [cached since 53.91s ago] (1,)
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - [cached since 48.13s ago] {}
2026-01-10 10:48:26 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:26 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:48:28 - sqlalchemy.engine.Engine - INFO - [cached since 56.27s ago] (1,)
2026-01-10 10:48:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:28 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 10:48:28 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] {'id_1': 1, 'param_1': 1}
2026-01-10 10:48:28 - routers.external_systems - INFO - 外部系统 access_token 发放成功 user_id=1 system_id=1 duration_ms=2
2026-01-10 10:48:28 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:28 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - [cached since 65.93s ago] (1,)
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - [cached since 51.96s ago] {}
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - [cached since 51.96s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 10:48:38 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - [cached since 65.94s ago] (1,)
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - [cached since 51.98s ago] {}
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - [cached since 51.98s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 10:48:38 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:38 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - [cached since 74.45s ago] (1,)
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s 
 LIMIT %(param_1)s
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] {'id_1': 1, 'param_1': 1}
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.name = %(name_1)s AND external_systems.id != %(id_1)s 
 LIMIT %(param_1)s
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] {'name_1': '曼彻斯特大学研究生专业入学评估系统', 'id_1': 1, 'param_1': 1}
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - UPDATE external_systems SET system_type=%(system_type)s, updated_at=now() WHERE external_systems.id = %(external_systems_id)s
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] {'system_type': 'iframe', 'external_systems_id': 1}
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id, external_systems.name, external_systems.system_type, external_systems.page_url, external_systems.api_key, external_systems.api_secret, external_systems.endpoint_url, external_systems.config, external_systems.is_active, external_systems.created_at, external_systems.updated_at 
FROM external_systems 
WHERE external_systems.id = %(pk_1)s
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - [cached since 23.39s ago] {'pk_1': 1}
2026-01-10 10:48:46 - routers.external_systems - INFO - 用户 admin 更新外部系统: 曼彻斯特大学研究生专业入学评估系统
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - [cached since 74.47s ago] (1,)
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - [cached since 60.5s ago] {}
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - [cached since 60.5s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 10:48:46 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - [cached since 77.14s ago] (1,)
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - [cached since 71.36s ago] {}
2026-01-10 10:48:49 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - [cached since 77.15s ago] (1,)
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - [cached since 71.37s ago] {}
2026-01-10 10:48:49 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - [cached since 78.4s ago] (1,)
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - [cached since 22.13s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 10:48:50 - routers.external_systems - INFO - 外部系统 access_token 发放成功 user_id=1 system_id=1 duration_ms=1
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - [cached since 78.43s ago] (1,)
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - [cached since 22.17s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 10:48:50 - routers.external_systems - INFO - 用户 admin 获取外部系统 曼彻斯特大学研究生专业入学评估系统 的集成配置
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:48:50 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.username = %s
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - [cached since 205.2s ago] ('admin',)
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - [cached since 219.8s ago] (1, 'username', 'admin', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', 1, None)
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 10:49:04 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - [cached since 92.54s ago] (1,)
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - [cached since 92.54s ago] ()
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - [cached since 92.53s ago] (1,)
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - [cached since 92.53s ago] (datetime.date(2026, 1, 10),)
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - [cached since 92.53s ago] ()
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - [cached since 92.55s ago] (1,)
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - [cached since 92.55s ago] ()
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - [cached since 92.55s ago] (1,)
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - [cached since 92.55s ago] (datetime.date(2026, 1, 10),)
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - [cached since 92.54s ago] ()
2026-01-10 10:49:04 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - [cached since 97.23s ago] (1,)
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - [cached since 94.41s ago] ()
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - [cached since 94.38s ago] (0, 10)
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - [cached since 97.24s ago] (1,)
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - [cached since 94.42s ago] ()
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - [cached since 94.39s ago] (0, 10)
2026-01-10 10:49:09 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - [cached since 115.4s ago] (1,)
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.username = %s
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - [cached since 228.5s ago] ('user',)
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.email = %s
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ('user@qq.com',)
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (username, email, password_hash, full_name, avatar_url, phone, status, user_type) VALUES (%s, %s, %s, %s, %s, %s, %s, %s)
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('user', 'user@qq.com', '$2b$12$bf8EI6lc6ubwdr5nlRJCFOs0RbKCa2D9Lw47ESj1Ai5aBSKMPRGYG', None, None, None, 1, 2)
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - INSERT INTO user_auths (user_id, auth_type, auth_key, auth_secret, wechat_nickname, wechat_avatar, is_verified, verified_at) VALUES (%s, %s, %s, %s, %s, %s, %s, %s)
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] (2, 'email', 'user@qq.com', '$2b$12$bf8EI6lc6ubwdr5nlRJCFOs0RbKCa2D9Lw47ESj1Ai5aBSKMPRGYG', None, None, 1, datetime.datetime(2026, 1, 10, 10, 49, 27, 770754))
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] (2,)
2026-01-10 10:49:27 - routers.users - INFO - 管理员创建用户成功: admin -> user
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - [cached since 115.7s ago] (1,)
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - [cached since 112.8s ago] ()
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - [cached since 112.8s ago] (0, 10)
2026-01-10 10:49:27 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - [cached since 122.6s ago] (1,)
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - [cached since 118s ago] (2,)
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - [cached since 118s ago] (2, 0, 10)
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - [cached since 122.7s ago] (1,)
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - [cached since 118s ago] (2,)
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - [cached since 118s ago] (2, 0, 10)
2026-01-10 10:49:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - [cached since 128.2s ago] (1,)
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (2,)
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - SELECT members.user_id AS members_user_id, members.id AS members_id, members.member_level AS members_member_level, members.points AS members_points, members.balance AS members_balance, members.expired_at AS members_expired_at, members.created_at AS members_created_at, members.updated_at AS members_updated_at 
FROM members 
WHERE members.user_id IN (%s)
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] (2,)
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - INSERT INTO members (user_id, member_level, points, balance, expired_at) VALUES (%s, %s, %s, %s, %s)
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] (2, 1, 0, 0.0, None)
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - UPDATE members SET points=%s, balance=%s, updated_at=now() WHERE members.id = %s
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (100, 100.0, 1)
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - INSERT INTO point_transactions (user_id, type, points, balance_after, amount, description, related_id, related_type) VALUES (%s, %s, %s, %s, %s, %s, %s, %s)
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] (2, 1, 100, 100, 100.0, '管理员充值：100点数', None, None)
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 10:49:40 - routers.users - INFO - 用户充值成功: admin -> user, 点数: 100
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - [cached since 128.2s ago] (1,)
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - [cached since 123.5s ago] (2,)
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - [cached since 123.5s ago] (2, 0, 10)
2026-01-10 10:49:40 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - [cached since 135.7s ago] (1,)
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - [cached since 135.6s ago] ()
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - [cached since 135.6s ago] (1,)
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - [cached since 135.6s ago] (datetime.date(2026, 1, 10),)
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - [cached since 135.6s ago] ()
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - [cached since 135.7s ago] (1,)
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - [cached since 135.7s ago] ()
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - [cached since 135.7s ago] (1,)
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - [cached since 135.7s ago] (datetime.date(2026, 1, 10),)
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - [cached since 135.7s ago] ()
2026-01-10 10:49:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.1s ago] (1,)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.1s ago] (1,)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.1s ago] ()
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 789.6s ago] ()
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.1s ago] (1,)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 789.6s ago] ()
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.1s ago] (datetime.date(2026, 1, 10),)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] (1,)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.1s ago] ()
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.001703s ago] (2,)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.1s ago] (1,)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.1s ago] (1,)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at 
FROM point_transactions ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ()
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 789.6s ago] ()
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at 
FROM point_transactions ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] (0, 6)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 789.6s ago] (0, 6)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.1s ago] (1,)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.1s ago] (1,)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.1s ago] ()
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 789.6s ago] ()
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.1s ago] (1,)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 789.6s ago] ()
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.1s ago] (datetime.date(2026, 1, 10),)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.01848s ago] (1,)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.1s ago] ()
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.02027s ago] (2,)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.2s ago] (1,)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at 
FROM point_transactions ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 0.01822s ago] ()
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 797.2s ago] (1,)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at 
FROM point_transactions ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (0, 6)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 789.7s ago] ()
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - [cached since 789.6s ago] (0, 6)
2026-01-10 11:00:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:00:52 - main - INFO - 应用正在关闭...
2026-01-10 11:00:53 - main - INFO - 正在初始化数据库...
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`users`
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_auths`
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`email_verification_codes`
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`login_logs`
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`members`
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_roles`
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`role_permissions`
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`roles`
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`permissions`
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`menus`
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`orders`
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`point_transactions`
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`external_systems`
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`system_configs`
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 11:00:53 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 11:00:53 - main - INFO - 数据库初始化完成
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] (1,)
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ()
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (1,)
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] (datetime.date(2026, 1, 10),)
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.008124s ago] (1,)
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.008781s ago] (1,)
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ()
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ()
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.01463s ago] (1,)
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ()
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] (0, 6)
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ()
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (0, 6)
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] (1,)
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - [cached since 0.002084s ago] (2,)
2026-01-10 11:00:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - [cached since 30.01s ago] (1,)
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] ()
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] (0, 10)
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - [cached since 30.02s ago] (1,)
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - [cached since 0.01646s ago] ()
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] (0, 10)
2026-01-10 11:01:27 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - [cached since 31.83s ago] (1,)
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] (2,)
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] (2, 0, 10)
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - [cached since 31.84s ago] (1,)
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - [cached since 0.01215s ago] (2,)
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (2, 0, 10)
2026-01-10 11:01:29 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - [cached since 33.26s ago] (1,)
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] {}
2026-01-10 11:01:31 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - [cached since 33.28s ago] (1,)
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - [cached since 0.01198s ago] {}
2026-01-10 11:01:31 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [cached since 34.83s ago] (1,)
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [cached since 34.83s ago] (1,)
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [cached since 34.82s ago] ()
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [cached since 34.82s ago] ()
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (0, 10)
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] ()
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [cached since 34.81s ago] (1,)
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [cached since 34.81s ago] (2,)
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [cached since 34.84s ago] (1,)
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [cached since 34.84s ago] (1,)
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [cached since 34.83s ago] ()
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [cached since 34.83s ago] ()
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.01684s ago] (0, 10)
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.01616s ago] ()
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] (1,)
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.001302s ago] (2,)
2026-01-10 11:01:32 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - [cached since 35.83s ago] (1,)
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - [cached since 35.81s ago] ()
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] (0, 10)
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - [cached since 35.84s ago] (1,)
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - [cached since 35.83s ago] ()
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - [cached since 0.01202s ago] (0, 10)
2026-01-10 11:01:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - [cached since 36.95s ago] (1,)
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - [cached since 3.678s ago] {}
2026-01-10 11:01:34 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - [cached since 36.96s ago] (1,)
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - [cached since 3.692s ago] {}
2026-01-10 11:01:34 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:36 - sqlalchemy.engine.Engine - INFO - [cached since 39.1s ago] (1,)
2026-01-10 11:01:36 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 11:01:36 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
2026-01-10 11:01:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:36 - sqlalchemy.engine.Engine - INFO - [cached since 39.11s ago] (1,)
2026-01-10 11:01:36 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 11:01:36 - sqlalchemy.engine.Engine - INFO - [cached since 0.01017s ago] ()
2026-01-10 11:01:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:01:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:01:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:01:49 - sqlalchemy.engine.Engine - INFO - [cached since 51.32s ago] (1,)
2026-01-10 11:01:49 - sqlalchemy.engine.Engine - INFO - INSERT INTO menus (name, path, component, icon, parent_id, sort_order, is_visible, permission_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s)
2026-01-10 11:01:49 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('test', None, None, None, None, 0, 1, None)
2026-01-10 11:01:49 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 11:01:49 - routers.menus - INFO - 创建菜单成功: admin -> test
2026-01-10 11:01:49 - routers.menus - ERROR - 创建菜单失败: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-10 11:03:45 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:45 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.username = %s
2026-01-10 11:03:45 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('admin',)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] (1, 'username', 'admin', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', 1, None)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 11:03:46 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 168.8s ago] (1,)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 168.8s ago] ()
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 168.8s ago] (1,)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 168.8s ago] (datetime.date(2026, 1, 10),)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 168.8s ago] ()
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 168.9s ago] (1,)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 168.9s ago] ()
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 134.1s ago] ()
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 168.9s ago] (1,)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 134.1s ago] (1,)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 168.9s ago] ()
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 134.1s ago] (2,)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 134.1s ago] (0, 6)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 168.9s ago] (1,)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 168.9s ago] ()
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 133.1s ago] (0, 6)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 169s ago] (1,)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 169s ago] ()
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 169s ago] (1,)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 169s ago] (datetime.date(2026, 1, 10),)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 169s ago] ()
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 169.1s ago] (1,)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 169.1s ago] (1,)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 169.1s ago] ()
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 169.1s ago] ()
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 134.3s ago] ()
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 133.3s ago] (0, 6)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 134.3s ago] (1,)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 134.3s ago] (2,)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 169.1s ago] (1,)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 169.1s ago] ()
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - [cached since 134.3s ago] (0, 6)
2026-01-10 11:03:46 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - [cached since 173.6s ago] (1,)
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - [cached since 140.3s ago] {}
2026-01-10 11:03:51 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - [cached since 173.8s ago] (1,)
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - [cached since 140.5s ago] {}
2026-01-10 11:03:51 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:03:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - [cached since 176.1s ago] (1,)
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] {'id_1': 1, 'param_1': 1}
2026-01-10 11:03:53 - routers.external_systems - INFO - 外部系统 access_token 发放成功 user_id=1 system_id=1 duration_ms=1
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - [cached since 176.2s ago] (1,)
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - [cached since 0.07079s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 11:03:53 - routers.external_systems - INFO - 用户 admin 获取外部系统 曼彻斯特大学研究生专业入学评估系统 的集成配置
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:03:53 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - [cached since 185.7s ago] (1,)
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - [cached since 9.6s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 11:04:03 - routers.external_systems - INFO - 外部系统 access_token 发放成功 user_id=1 system_id=1 duration_ms=1
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - [cached since 185.9s ago] (1,)
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - [cached since 9.8s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 11:04:03 - routers.external_systems - INFO - 用户 admin 获取外部系统 曼彻斯特大学研究生专业入学评估系统 的集成配置
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:04:03 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] (1,)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] (1,)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] (1,)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] ()
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] (1,)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] ()
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] ()
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] (1,)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] ()
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 351.2s ago] (0, 6)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 351.2s ago] ()
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] (datetime.date(2026, 1, 10),)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 350.2s ago] (0, 6)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] ()
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 351.2s ago] (1,)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 351.2s ago] (2,)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] (1,)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] ()
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 351.2s ago] (0, 6)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] (1,)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] ()
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 350.2s ago] (0, 6)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] (1,)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] (1,)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] ()
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] ()
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] (1,)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 351.2s ago] ()
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] (datetime.date(2026, 1, 10),)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 351.2s ago] (1,)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 386s ago] ()
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - [cached since 351.2s ago] (2,)
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:07:23 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - [cached since 390.4s ago] (1,)
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - [cached since 358.5s ago] (2,)
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - [cached since 358.5s ago] (2, 0, 10)
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - [cached since 390.4s ago] (1,)
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - [cached since 358.6s ago] (2,)
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - [cached since 358.6s ago] (2, 0, 10)
2026-01-10 11:07:28 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - [cached since 395.5s ago] (1,)
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ()
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (0, 10)
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s)
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - [generated in 0.00027s] (1,)
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - [cached since 395.5s ago] (1,)
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - [cached since 0.01621s ago] ()
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (0, 10)
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s)
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - [cached since 0.0133s ago] (1,)
2026-01-10 11:07:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:07:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:07:43 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:07:43 - sqlalchemy.engine.Engine - INFO - [cached since 405.7s ago] (1,)
2026-01-10 11:07:43 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
WHERE roles.name = %s
2026-01-10 11:07:43 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('会员',)
2026-01-10 11:07:43 - sqlalchemy.engine.Engine - INFO - INSERT INTO roles (name, description, is_system) VALUES (%s, %s, %s)
2026-01-10 11:07:43 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] ('会员', None, 0)
2026-01-10 11:07:43 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 11:07:43 - routers.roles - INFO - 创建角色成功: admin -> 会员
2026-01-10 11:07:43 - routers.roles - ERROR - 创建角色失败: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-10 11:09:48 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:09:48 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.username = %s
2026-01-10 11:09:48 - sqlalchemy.engine.Engine - INFO - [cached since 362.7s ago] ('admin',)
2026-01-10 11:09:48 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-10 11:09:48 - sqlalchemy.engine.Engine - INFO - [cached since 362.7s ago] (1, 'username', 'admin', '127.0.0.1', 'Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 MicroMessenger/8.0.67(0x1800432b) NetType/4G Language/zh_CN', 1, None)
2026-01-10 11:09:48 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 11:09:48 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 531.3s ago] (1,)
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 531.3s ago] ()
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 496.5s ago] (0, 6)
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 531.3s ago] (1,)
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 531.3s ago] ()
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 495.5s ago] (0, 6)
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 531.3s ago] (1,)
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 531.3s ago] ()
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 496.5s ago] ()
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 496.5s ago] (1,)
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 496.5s ago] (2,)
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 531.4s ago] (1,)
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 531.4s ago] ()
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 531.4s ago] (1,)
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 531.4s ago] (datetime.date(2026, 1, 10),)
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - [cached since 531.4s ago] ()
2026-01-10 11:09:49 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:15:55 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:15:55 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.username = %s
2026-01-10 11:15:55 - sqlalchemy.engine.Engine - INFO - [cached since 730.1s ago] ('admin',)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 730.1s ago] (1, 'username', 'admin', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', 1, None)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 11:15:56 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] (1,)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] (1,)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] (1,)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] ()
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] ()
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] (1,)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] ()
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] (1,)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 863.8s ago] ()
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] (datetime.date(2026, 1, 10),)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] ()
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 863.8s ago] (0, 6)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 863.8s ago] (1,)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] ()
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 862.8s ago] (0, 6)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 863.8s ago] (2,)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] (1,)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] ()
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 863.8s ago] (0, 6)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] (1,)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] ()
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] (1,)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] (1,)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] (1,)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] ()
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] (datetime.date(2026, 1, 10),)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] ()
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 862.8s ago] (0, 6)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 863.8s ago] ()
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 898.6s ago] ()
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 863.8s ago] (1,)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - [cached since 863.8s ago] (2,)
2026-01-10 11:15:56 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - [cached since 900.4s ago] (1,)
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - [cached since 867.1s ago] {}
2026-01-10 11:15:58 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - [cached since 900.4s ago] (1,)
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - [cached since 867.2s ago] {}
2026-01-10 11:15:58 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:15:58 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - [cached since 926.8s ago] (1,)
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] {}
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] {'param_1': 0, 'param_2': 10}
2026-01-10 11:16:24 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - [cached since 926.8s ago] (1,)
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - [cached since 0.01395s ago] {}
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - [cached since 0.0135s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 11:16:24 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:16:24 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - [cached since 932.1s ago] (1,)
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - [cached since 898.9s ago] {}
2026-01-10 11:16:29 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - [cached since 932.1s ago] (1,)
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - [cached since 898.9s ago] {}
2026-01-10 11:16:29 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:16:29 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - [cached since 966.2s ago] (1,)
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - [cached since 790.1s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 11:17:03 - routers.external_systems - INFO - 外部系统 access_token 发放成功 user_id=1 system_id=1 duration_ms=1
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - [cached since 966.2s ago] (1,)
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - [cached since 790.1s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 11:17:03 - routers.external_systems - INFO - 用户 admin 获取外部系统 曼彻斯特大学研究生专业入学评估系统 的集成配置
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:17:03 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - [cached since 969.4s ago] (1,)
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - [cached since 793.2s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 11:17:07 - routers.external_systems - INFO - 外部系统 access_token 发放成功 user_id=1 system_id=1 duration_ms=1
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - [cached since 969.4s ago] (1,)
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - [cached since 793.2s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 11:17:07 - routers.external_systems - INFO - 用户 admin 获取外部系统 曼彻斯特大学研究生专业入学评估系统 的集成配置
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:17:07 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - [cached since 974.8s ago] (1,)
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - [cached since 798.7s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 11:17:12 - routers.external_systems - INFO - 外部系统 access_token 发放成功 user_id=1 system_id=1 duration_ms=1
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - [cached since 974.8s ago] (1,)
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - [cached since 798.7s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 11:17:12 - routers.external_systems - INFO - 用户 admin 获取外部系统 曼彻斯特大学研究生专业入学评估系统 的集成配置
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:17:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] (1,)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] (1,)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] ()
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] (1,)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] ()
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] (1,)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] (1,)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] ()
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1016s ago] ()
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] ()
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] (datetime.date(2026, 1, 10),)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1016s ago] (0, 6)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1016s ago] (1,)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] ()
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1015s ago] (0, 6)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1016s ago] (2,)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] (1,)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] ()
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1016s ago] (0, 6)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] (1,)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] (1,)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] (1,)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] ()
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] ()
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] ()
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1015s ago] (0, 6)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] (1,)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1016s ago] ()
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1016s ago] (1,)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] (datetime.date(2026, 1, 10),)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1051s ago] ()
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - [cached since 1016s ago] (2,)
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:18:28 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - [cached since 1433s ago] (1,)
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - [cached since 1400s ago] {}
2026-01-10 11:24:51 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - [cached since 1433s ago] (1,)
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - [cached since 1400s ago] {}
2026-01-10 11:24:51 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:24:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:24:58 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:24:58 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:24:58 - sqlalchemy.engine.Engine - INFO - [cached since 1441s ago] (1,)
2026-01-10 11:24:58 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:24:58 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 11:24:58 - sqlalchemy.engine.Engine - INFO - [cached since 1407s ago] {}
2026-01-10 11:24:58 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 11:24:58 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:24:58 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - [cached since 2632s ago] (1,)
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - [cached since 2237s ago] ()
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - [cached since 2237s ago] (0, 10)
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s)
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - [cached since 2237s ago] (1, 2)
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - [cached since 2632s ago] (1,)
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - [cached since 2237s ago] ()
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - [cached since 2237s ago] (0, 10)
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s)
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - [cached since 2237s ago] (1, 2)
2026-01-10 11:44:50 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:44:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:44:53 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:44:53 - sqlalchemy.engine.Engine - INFO - [cached since 2636s ago] (1,)
2026-01-10 11:44:53 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id, permissions.name, permissions.code, permissions.resource, permissions.action, permissions.description, permissions.created_at 
FROM permissions ORDER BY permissions.id ASC
2026-01-10 11:44:53 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ()
2026-01-10 11:44:53 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:44:53 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:44:53 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:44:53 - sqlalchemy.engine.Engine - INFO - [cached since 2636s ago] (1,)
2026-01-10 11:44:53 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
WHERE roles.id = %s
2026-01-10 11:44:53 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (2,)
2026-01-10 11:44:53 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s)
2026-01-10 11:44:53 - sqlalchemy.engine.Engine - INFO - [cached since 2241s ago] (2,)
2026-01-10 11:44:53 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - [cached since 2664s ago] (1,)
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
WHERE roles.id = %s
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] (2,)
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - SELECT user_roles.user_id, user_roles.role_id 
FROM user_roles 
WHERE user_roles.role_id = %s
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (2,)
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.phone AS users_phone, users.status AS users_status, users.user_type AS users_user_type, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, user_roles 
WHERE %s = user_roles.role_id AND users.id = user_roles.user_id
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] (2,)
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE %s = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (2,)
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - DELETE FROM roles WHERE roles.id = %s
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (2,)
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 11:45:22 - routers.roles - INFO - 删除角色成功: admin -> 会员
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - [cached since 2664s ago] (1,)
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - [cached since 2269s ago] ()
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - [cached since 2269s ago] (0, 10)
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s)
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - [cached since 2269s ago] (1,)
2026-01-10 11:45:22 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:45:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:28 - sqlalchemy.engine.Engine - INFO - [cached since 2670s ago] (1,)
2026-01-10 11:45:28 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
WHERE roles.name = %s
2026-01-10 11:45:28 - sqlalchemy.engine.Engine - INFO - [cached since 2265s ago] ('会员',)
2026-01-10 11:45:28 - sqlalchemy.engine.Engine - INFO - INSERT INTO roles (name, description, is_system) VALUES (%s, %s, %s)
2026-01-10 11:45:28 - sqlalchemy.engine.Engine - INFO - [cached since 2265s ago] ('会员', None, 0)
2026-01-10 11:45:28 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 11:45:28 - routers.roles - INFO - 创建角色成功: admin -> 会员
2026-01-10 11:45:28 - routers.roles - ERROR - 创建角色失败: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-10 11:45:29 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:29 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:29 - sqlalchemy.engine.Engine - INFO - [cached since 2672s ago] (1,)
2026-01-10 11:45:29 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
WHERE roles.name = %s
2026-01-10 11:45:29 - sqlalchemy.engine.Engine - INFO - [cached since 2266s ago] ('会员',)
2026-01-10 11:45:29 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - [cached since 2679s ago] (1,)
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - [cached since 2283s ago] ()
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - [cached since 2283s ago] (0, 10)
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s)
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - [cached since 2283s ago] (1, 3)
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - [cached since 2679s ago] (1,)
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - [cached since 2283s ago] ()
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - [cached since 2283s ago] (0, 10)
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s)
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - [cached since 2283s ago] (1, 3)
2026-01-10 11:45:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('email', 'admin@example.com')
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2517s ago] (1, 'email', 'admin@example.com', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', 1, None)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 11:45:43 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] (1,)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] (1,)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] (1,)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] ()
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] (1,)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] ()
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] ()
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] (1,)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] ()
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2651s ago] ()
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] (datetime.date(2026, 1, 10),)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2651s ago] (0, 6)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2650s ago] (0, 6)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2651s ago] (1,)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] ()
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2651s ago] (2,)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] (1,)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] ()
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2651s ago] (0, 6)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] (1,)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] (1,)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] (1,)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] ()
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] ()
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] ()
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2650s ago] (0, 6)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] (1,)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2651s ago] ()
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] (datetime.date(2026, 1, 10),)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2651s ago] (1,)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2686s ago] ()
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - [cached since 2651s ago] (2,)
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:45:43 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - [cached since 2695s ago] (1,)
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - [cached since 2300s ago] ()
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - [cached since 2300s ago] (0, 10)
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s)
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - [cached since 2300s ago] (1, 3)
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - [cached since 2695s ago] (1,)
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - [cached since 2300s ago] ()
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - [cached since 2300s ago] (0, 10)
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s)
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - [cached since 2300s ago] (1, 3)
2026-01-10 11:45:52 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - [cached since 2701s ago] (1,)
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
WHERE roles.id = %s
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - [cached since 37.09s ago] (3,)
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - SELECT user_roles.user_id, user_roles.role_id 
FROM user_roles 
WHERE user_roles.role_id = %s
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - [cached since 37.09s ago] (3,)
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.phone AS users_phone, users.status AS users_status, users.user_type AS users_user_type, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, user_roles 
WHERE %s = user_roles.role_id AND users.id = user_roles.user_id
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - [cached since 37.09s ago] (3,)
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE %s = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - [cached since 37.09s ago] (3,)
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - DELETE FROM roles WHERE roles.id = %s
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - [cached since 37.08s ago] (3,)
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 11:45:59 - routers.roles - INFO - 删除角色成功: admin -> 会员
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - [cached since 2701s ago] (1,)
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - [cached since 2306s ago] ()
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - [cached since 2306s ago] (0, 10)
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s)
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - [cached since 2306s ago] (1,)
2026-01-10 11:45:59 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 11:46:06 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:46:06 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:46:06 - sqlalchemy.engine.Engine - INFO - [cached since 2708s ago] (1,)
2026-01-10 11:46:06 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
WHERE roles.name = %s
2026-01-10 11:46:06 - sqlalchemy.engine.Engine - INFO - [cached since 2303s ago] ('test',)
2026-01-10 11:46:06 - sqlalchemy.engine.Engine - INFO - INSERT INTO roles (name, description, is_system) VALUES (%s, %s, %s)
2026-01-10 11:46:06 - sqlalchemy.engine.Engine - INFO - [cached since 2303s ago] ('test', None, 0)
2026-01-10 11:46:06 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 11:46:06 - routers.roles - INFO - 创建角色成功: admin -> test
2026-01-10 11:46:06 - routers.roles - ERROR - 创建角色失败: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-10 11:46:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 11:46:10 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 11:46:10 - sqlalchemy.engine.Engine - INFO - [cached since 2713s ago] (1,)
2026-01-10 11:46:10 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 11:46:10 - sqlalchemy.engine.Engine - INFO - [cached since 2317s ago] ()
2026-01-10 11:46:10 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 11:46:10 - sqlalchemy.engine.Engine - INFO - [cached since 2317s ago] (0, 10)
2026-01-10 11:46:10 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s)
2026-01-10 11:46:10 - sqlalchemy.engine.Engine - INFO - [cached since 2317s ago] (1, 4)
2026-01-10 11:46:10 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 13:55:50 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 13:55:50 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 13:55:50 - sqlalchemy.engine.Engine - INFO - [cached since 7808s ago] ('email', 'admin@example.com')
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.033e+04s ago] (1, 'email', 'admin@example.com', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', 1, None)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 13:55:51 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] (1,)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] (1,)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] ()
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] (1,)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] ()
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] (1,)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] ()
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.046e+04s ago] (0, 6)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] (datetime.date(2026, 1, 10),)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.046e+04s ago] (0, 6)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] ()
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] (1,)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] ()
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.046e+04s ago] ()
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.046e+04s ago] (1,)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.046e+04s ago] (2,)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] (1,)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] ()
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.046e+04s ago] (0, 6)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] (1,)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] (1,)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] ()
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] ()
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] (1,)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.046e+04s ago] (0, 6)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] (datetime.date(2026, 1, 10),)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] ()
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] (1,)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.049e+04s ago] ()
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.046e+04s ago] ()
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.046e+04s ago] (1,)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - [cached since 1.046e+04s ago] (2,)
2026-01-10 13:55:51 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:11:55 - main - INFO - 应用正在关闭...
2026-01-10 14:22:03 - main - INFO - 正在初始化数据库...
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`users`
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_auths`
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`email_verification_codes`
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`login_logs`
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`members`
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_roles`
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`role_permissions`
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`roles`
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`permissions`
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`menus`
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`orders`
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`point_transactions`
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`external_systems`
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`system_configs`
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:22:03 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 14:22:03 - main - INFO - 数据库初始化完成
2026-01-10 14:24:38 - main - INFO - 正在初始化数据库...
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`users`
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_auths`
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`email_verification_codes`
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`login_logs`
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`members`
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_roles`
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`role_permissions`
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`roles`
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`permissions`
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`menus`
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`orders`
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`point_transactions`
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`external_systems`
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`system_configs`
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:24:38 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 14:24:38 - main - INFO - 数据库初始化完成
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ('email', 'admin@example.com')
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00025s] (1, 'email', 'admin@example.com', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', 1, None)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 14:24:44 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] (1,)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ()
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] (1,)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.005891s ago] (1,)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.006398s ago] (1,)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.006958s ago] (1,)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] (datetime.date(2026, 1, 10),)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] ()
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ()
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] ()
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (0, 6)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] (0, 6)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ()
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] (1,)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.001508s ago] (2,)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.03356s ago] (1,)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.0318s ago] ()
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.03568s ago] (1,)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.03157s ago] (1,)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.02467s ago] ()
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.03047s ago] (datetime.date(2026, 1, 10),)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (0, 6)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.04122s ago] (1,)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.02745s ago] ()
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.04378s ago] (1,)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.03444s ago] ()
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (0, 6)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.03203s ago] ()
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ()
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.02484s ago] (1,)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - [cached since 0.02602s ago] (2,)
2026-01-10 14:24:44 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - [cached since 2.875s ago] (1,)
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ()
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] (0, 10)
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - [cached since 2.89s ago] (1,)
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - [cached since 0.01367s ago] ()
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] (0, 10)
2026-01-10 14:24:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.858s ago] (1,)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.859s ago] (1,)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.859s ago] (1,)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.86s ago] (1,)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.857s ago] ()
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.848s ago] ()
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.846s ago] ()
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.852s ago] ()
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.859s ago] (1,)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.818s ago] (0, 6)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.816s ago] ()
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.825s ago] (0, 6)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.859s ago] (datetime.date(2026, 1, 10),)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] (1,)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 0.002687s ago] (2,)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.859s ago] ()
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.878s ago] (1,)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.867s ago] ()
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.84s ago] (0, 6)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.881s ago] (1,)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.872s ago] ()
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.837s ago] (0, 6)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.886s ago] (1,)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.886s ago] (1,)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.883s ago] ()
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.872s ago] ()
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.883s ago] (1,)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.839s ago] ()
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.881s ago] (datetime.date(2026, 1, 10),)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 0.01992s ago] (1,)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 7.876s ago] ()
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - [cached since 0.02088s ago] (2,)
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:52 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - [cached since 12.43s ago] (1,)
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - [cached since 9.558s ago] ()
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - [cached since 9.545s ago] (0, 10)
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - [cached since 12.45s ago] (1,)
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - [cached since 9.57s ago] ()
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - [cached since 9.556s ago] (0, 10)
2026-01-10 14:24:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - [cached since 14.74s ago] (1,)
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {}
2026-01-10 14:24:59 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - [cached since 14.76s ago] (1,)
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - [cached since 0.01193s ago] {}
2026-01-10 14:24:59 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:24:59 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - [cached since 15.88s ago] (1,)
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] {'id_1': 1, 'param_1': 1}
2026-01-10 14:25:00 - routers.external_systems - INFO - 外部系统 access_token 发放成功 user_id=1 system_id=1 duration_ms=1
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - [cached since 15.89s ago] (1,)
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - [cached since 0.01452s ago] {'id_1': 1, 'param_1': 1}
2026-01-10 14:25:00 - routers.external_systems - INFO - 用户 admin 获取外部系统 曼彻斯特大学研究生专业入学评估系统 的集成配置
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:25:00 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - [cached since 107.7s ago] (1,)
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ()
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - SELECT menus.parent_id AS menus_parent_id, menus.id AS menus_id, menus.name AS menus_name, menus.path AS menus_path, menus.component AS menus_component, menus.icon AS menus_icon, menus.sort_order AS menus_sort_order, menus.is_visible AS menus_is_visible, menus.permission_id AS menus_permission_id, menus.created_at AS menus_created_at 
FROM menus 
WHERE menus.parent_id IN (%s)
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] (1,)
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - [cached since 107.7s ago] (1,)
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.0206s ago] ()
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - SELECT menus.parent_id AS menus_parent_id, menus.id AS menus_id, menus.name AS menus_name, menus.path AS menus_path, menus.component AS menus_component, menus.icon AS menus_icon, menus.sort_order AS menus_sort_order, menus.is_visible AS menus_is_visible, menus.permission_id AS menus_permission_id, menus.created_at AS menus_created_at 
FROM menus 
WHERE menus.parent_id IN (%s)
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - [cached since 0.02025s ago] (1,)
2026-01-10 14:26:32 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - [cached since 113.2s ago] (1,)
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus 
WHERE menus.id = %s
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] (1,)
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus 
WHERE menus.parent_id = %s
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] (1,)
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - SELECT menus.id AS menus_id, menus.name AS menus_name, menus.path AS menus_path, menus.component AS menus_component, menus.icon AS menus_icon, menus.parent_id AS menus_parent_id, menus.sort_order AS menus_sort_order, menus.is_visible AS menus_is_visible, menus.permission_id AS menus_permission_id, menus.created_at AS menus_created_at 
FROM menus 
WHERE %s = menus.parent_id
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] (1,)
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - DELETE FROM menus WHERE menus.id = %s
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s] (1,)
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 14:26:37 - routers.menus - INFO - 删除菜单成功: admin -> test
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - [cached since 113.3s ago] (1,)
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - [cached since 5.552s ago] ()
2026-01-10 14:26:37 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:26:45 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:26:45 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:26:45 - sqlalchemy.engine.Engine - INFO - [cached since 121.4s ago] (1,)
2026-01-10 14:26:45 - sqlalchemy.engine.Engine - INFO - INSERT INTO menus (name, path, component, icon, parent_id, sort_order, is_visible, permission_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s)
2026-01-10 14:26:45 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] ('test', None, None, None, None, 0, 1, None)
2026-01-10 14:26:45 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 14:26:45 - routers.menus - INFO - 创建菜单成功: admin -> test
2026-01-10 14:26:45 - routers.menus - ERROR - 创建菜单失败: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
2026-01-10 14:31:04 - main - INFO - 应用正在关闭...
2026-01-10 14:31:06 - main - INFO - 正在初始化数据库...
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`users`
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_auths`
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`email_verification_codes`
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`login_logs`
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`members`
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_roles`
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`role_permissions`
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`roles`
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`permissions`
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`menus`
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`orders`
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`point_transactions`
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`external_systems`
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`system_configs`
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:06 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 14:31:06 - main - INFO - 数据库初始化完成
2026-01-10 14:31:12 - main - INFO - 应用正在关闭...
2026-01-10 14:31:15 - main - INFO - 正在初始化数据库...
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`users`
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_auths`
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`email_verification_codes`
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`login_logs`
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`members`
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`user_roles`
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`role_permissions`
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`roles`
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`permissions`
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`menus`
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`orders`
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`point_transactions`
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`external_systems`
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - DESCRIBE `admin_system`.`system_configs`
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2026-01-10 14:31:15 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 14:31:15 - main - INFO - 数据库初始化完成
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] (1,)
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ()
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - SELECT menus.parent_id AS menus_parent_id, menus.id AS menus_id, menus.name AS menus_name, menus.path AS menus_path, menus.component AS menus_component, menus.icon AS menus_icon, menus.sort_order AS menus_sort_order, menus.is_visible AS menus_is_visible, menus.permission_id AS menus_permission_id, menus.created_at AS menus_created_at 
FROM menus 
WHERE menus.parent_id IN (%s)
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] (2,)
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.02547s ago] (1,)
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.02325s ago] ()
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - SELECT menus.parent_id AS menus_parent_id, menus.id AS menus_id, menus.name AS menus_name, menus.path AS menus_path, menus.component AS menus_component, menus.icon AS menus_icon, menus.sort_order AS menus_sort_order, menus.is_visible AS menus_is_visible, menus.permission_id AS menus_permission_id, menus.created_at AS menus_created_at 
FROM menus 
WHERE menus.parent_id IN (%s)
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.0241s ago] (2,)
2026-01-10 14:31:16 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - [cached since 5.521s ago] (1,)
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus 
WHERE menus.id = %s
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (2,)
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus 
WHERE menus.parent_id = %s
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (2,)
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - SELECT menus.id AS menus_id, menus.name AS menus_name, menus.path AS menus_path, menus.component AS menus_component, menus.icon AS menus_icon, menus.parent_id AS menus_parent_id, menus.sort_order AS menus_sort_order, menus.is_visible AS menus_is_visible, menus.permission_id AS menus_permission_id, menus.created_at AS menus_created_at 
FROM menus 
WHERE %s = menus.parent_id
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (2,)
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - DELETE FROM menus WHERE menus.id = %s
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] (2,)
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 14:31:22 - routers.menus - INFO - 删除菜单成功: admin -> test
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - [cached since 5.543s ago] (1,)
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - [cached since 5.539s ago] ()
2026-01-10 14:31:22 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:31:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:31:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:31:28 - sqlalchemy.engine.Engine - INFO - [cached since 12.42s ago] (1,)
2026-01-10 14:31:28 - sqlalchemy.engine.Engine - INFO - INSERT INTO menus (name, path, component, icon, parent_id, sort_order, is_visible, permission_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s)
2026-01-10 14:31:28 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] ('test', None, None, None, None, 0, 1, None)
2026-01-10 14:31:28 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 14:31:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:31:28 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus 
WHERE menus.id = %s
2026-01-10 14:31:28 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (3,)
2026-01-10 14:31:28 - routers.menus - INFO - 创建菜单成功: admin -> test
2026-01-10 14:31:28 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:31:29 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:31:29 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:31:29 - sqlalchemy.engine.Engine - INFO - [cached since 12.44s ago] (1,)
2026-01-10 14:31:29 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 14:31:29 - sqlalchemy.engine.Engine - INFO - [cached since 12.44s ago] ()
2026-01-10 14:31:29 - sqlalchemy.engine.Engine - INFO - SELECT menus.parent_id AS menus_parent_id, menus.id AS menus_id, menus.name AS menus_name, menus.path AS menus_path, menus.component AS menus_component, menus.icon AS menus_icon, menus.sort_order AS menus_sort_order, menus.is_visible AS menus_is_visible, menus.permission_id AS menus_permission_id, menus.created_at AS menus_created_at 
FROM menus 
WHERE menus.parent_id IN (%s)
2026-01-10 14:31:29 - sqlalchemy.engine.Engine - INFO - [cached since 12.44s ago] (3,)
2026-01-10 14:31:29 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - [cached since 20.3s ago] (1,)
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus 
WHERE menus.id = %s
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - [cached since 14.78s ago] (3,)
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - INSERT INTO menus (name, path, component, icon, parent_id, sort_order, is_visible, permission_id) VALUES (%s, %s, %s, %s, %s, %s, %s, %s)
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - [cached since 7.884s ago] ('test1', None, None, None, 3, 0, 1, None)
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus 
WHERE menus.id = %s
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - [cached since 7.883s ago] (4,)
2026-01-10 14:31:36 - routers.menus - INFO - 创建菜单成功: admin -> test1
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - [cached since 20.33s ago] (1,)
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - [cached since 20.32s ago] ()
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - SELECT menus.parent_id AS menus_parent_id, menus.id AS menus_id, menus.name AS menus_name, menus.path AS menus_path, menus.component AS menus_component, menus.icon AS menus_icon, menus.sort_order AS menus_sort_order, menus.is_visible AS menus_is_visible, menus.permission_id AS menus_permission_id, menus.created_at AS menus_created_at 
FROM menus 
WHERE menus.parent_id IN (%s, %s)
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - [cached since 20.32s ago] (3, 4)
2026-01-10 14:31:36 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - [cached since 768s ago] (1,)
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - SELECT DATABASE()
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - SELECT @@sql_mode
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - SELECT @@lower_case_table_names
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - [raw sql] {}
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - [generated in 0.00013s] {}
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] {'param_1': 0, 'param_2': 10}
2026-01-10 14:44:04 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - [cached since 768s ago] (1,)
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - [cached since 0.01547s ago] {}
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - [cached since 0.01458s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 14:44:04 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:04 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - [cached since 772.3s ago] (1,)
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - [cached since 772.3s ago] ()
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - SELECT menus.parent_id AS menus_parent_id, menus.id AS menus_id, menus.name AS menus_name, menus.path AS menus_path, menus.component AS menus_component, menus.icon AS menus_icon, menus.sort_order AS menus_sort_order, menus.is_visible AS menus_is_visible, menus.permission_id AS menus_permission_id, menus.created_at AS menus_created_at 
FROM menus 
WHERE menus.parent_id IN (%s, %s)
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - [cached since 772.3s ago] (3, 4)
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - [cached since 772.3s ago] (1,)
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - [cached since 772.3s ago] ()
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - SELECT menus.parent_id AS menus_parent_id, menus.id AS menus_id, menus.name AS menus_name, menus.path AS menus_path, menus.component AS menus_component, menus.icon AS menus_icon, menus.sort_order AS menus_sort_order, menus.is_visible AS menus_is_visible, menus.permission_id AS menus_permission_id, menus.created_at AS menus_created_at 
FROM menus 
WHERE menus.parent_id IN (%s, %s)
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - [cached since 772.3s ago] (3, 4)
2026-01-10 14:44:08 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - [cached since 773.9s ago] (1,)
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ()
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] (0, 10)
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s)
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (1, 4)
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - [cached since 773.9s ago] (1,)
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.02031s ago] ()
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (0, 10)
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s)
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - [cached since 0.01816s ago] (1, 4)
2026-01-10 14:44:10 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [cached since 779.6s ago] (1,)
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ()
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [generated in 0.00022s] (0, 10)
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [cached since 779.6s ago] (1,)
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] ()
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] ()
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (1,)
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.001711s ago] (2,)
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [cached since 779.6s ago] (1,)
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.01557s ago] ()
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] (0, 10)
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [cached since 779.6s ago] (1,)
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.01802s ago] ()
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [generated in 0.00023s] ()
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.01526s ago] (1,)
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - [cached since 0.01607s ago] (2,)
2026-01-10 14:44:16 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - [cached since 788.5s ago] (1,)
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - [generated in 0.00011s] {}
2026-01-10 14:44:25 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - [cached since 788.5s ago] (1,)
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - [cached since 0.01906s ago] {}
2026-01-10 14:44:25 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:25 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - [cached since 791.4s ago] (1,)
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - [cached since 23.38s ago] {}
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - [cached since 23.38s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 14:44:27 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - [cached since 791.4s ago] (1,)
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - [cached since 23.39s ago] {}
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - [cached since 23.39s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 14:44:27 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:27 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - [cached since 793s ago] (1,)
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] (2,)
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (2, 0, 10)
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - [cached since 793s ago] (1,)
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users 
WHERE users.user_type = %s) AS anon_1
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - [cached since 0.03896s ago] (2,)
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.user_type = %s 
 LIMIT %s, %s
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (2, 0, 10)
2026-01-10 14:44:29 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - [cached since 796.9s ago] (1,)
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] ()
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - [generated in 0.00020s] (0, 10)
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - [cached since 796.9s ago] (1,)
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT users.id AS id, users.username AS username, users.email AS email, users.password_hash AS password_hash, users.full_name AS full_name, users.avatar_url AS avatar_url, users.phone AS phone, users.status AS status, users.user_type AS user_type, users.created_at AS created_at, users.updated_at AS updated_at 
FROM users) AS anon_1
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - [cached since 0.01185s ago] ()
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
 LIMIT %s, %s
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] (0, 10)
2026-01-10 14:44:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 798.3s ago] (1,)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 798.3s ago] (1,)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 18.78s ago] ()
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00237s] ()
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 18.77s ago] ()
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] (1,)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s] (1,)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00065s] (datetime.date(2026, 1, 10),)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.007184s ago] (2,)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00057s] ()
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 798.4s ago] (1,)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 798.4s ago] (1,)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00136s] ()
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 18.83s ago] ()
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 18.81s ago] (0, 6)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00026s] (0, 6)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 798.4s ago] (1,)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 798.4s ago] (1,)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 18.84s ago] ()
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 18.82s ago] ()
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.05266s ago] ()
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.04227s ago] (1,)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.0475s ago] (1,)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.04509s ago] (2,)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 798.4s ago] (1,)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 18.85s ago] ()
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.04473s ago] (datetime.date(2026, 1, 10),)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 798.4s ago] (1,)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 18.84s ago] (0, 6)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.04231s ago] ()
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [cached since 0.03332s ago] ()
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] (0, 6)
2026-01-10 14:44:34 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:37 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 18:23:37 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 18:23:37 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 18:23:37 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 18:23:37 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 18:23:37 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 18:23:37 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 18:23:37 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00021s] ('email', 'admin@example.com')
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] (1, 'email', 'admin@example.com', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', 1, None)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 18:23:41 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.395e+04s ago] (1,)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.395e+04s ago] (1,)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] ()
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.395e+04s ago] (1,)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.317e+04s ago] ()
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.395e+04s ago] (1,)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] (1,)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.317e+04s ago] ()
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.317e+04s ago] ()
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] ()
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] (datetime.date(2026, 1, 10),)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] (1,)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.317e+04s ago] (0, 6)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] (0, 6)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] ()
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] (2,)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.395e+04s ago] (1,)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.317e+04s ago] ()
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.317e+04s ago] (0, 6)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.395e+04s ago] (1,)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] ()
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] (0, 6)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.395e+04s ago] (1,)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] ()
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.395e+04s ago] (1,)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] (1,)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.317e+04s ago] ()
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] (datetime.date(2026, 1, 10),)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.317e+04s ago] ()
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] ()
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] (1,)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - [cached since 1.315e+04s ago] (2,)
2026-01-10 18:23:41 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - [cached since 1.395e+04s ago] (1,)
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] ()
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] (0, 10)
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s)
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] (1, 4)
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - [cached since 1.395e+04s ago] (1,)
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] ()
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] (0, 10)
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s, %s)
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] (1, 4)
2026-01-10 18:23:47 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - [cached since 1.396e+04s ago] (1,)
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
WHERE roles.id = %s
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] (4,)
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - SELECT user_roles.user_id, user_roles.role_id 
FROM user_roles 
WHERE user_roles.role_id = %s
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s] (4,)
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.username AS users_username, users.email AS users_email, users.password_hash AS users_password_hash, users.full_name AS users_full_name, users.avatar_url AS users_avatar_url, users.phone AS users_phone, users.status AS users_status, users.user_type AS users_user_type, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users, user_roles 
WHERE %s = user_roles.role_id AND users.id = user_roles.user_id
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - [generated in 0.00019s] (4,)
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - SELECT permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM permissions, role_permissions 
WHERE %s = role_permissions.role_id AND permissions.id = role_permissions.permission_id
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - [generated in 0.00018s] (4,)
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - DELETE FROM roles WHERE roles.id = %s
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - [generated in 0.00014s] (4,)
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 18:23:55 - routers.roles - INFO - 删除角色成功: admin -> test
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - [cached since 1.396e+04s ago] (1,)
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - [cached since 1.319e+04s ago] ()
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - [cached since 1.319e+04s ago] (0, 10)
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s)
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - [cached since 1.319e+04s ago] (1,)
2026-01-10 18:23:55 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.396e+04s ago] (1,)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.396e+04s ago] (1,)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.396e+04s ago] (1,)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] ()
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] ()
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.396e+04s ago] (1,)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] ()
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] (1,)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] ()
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] ()
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] (0, 6)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] (datetime.date(2026, 1, 10),)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] (1,)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] (0, 6)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] ()
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] (2,)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.396e+04s ago] (1,)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] ()
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] (0, 6)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.396e+04s ago] (1,)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.396e+04s ago] (1,)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.396e+04s ago] (1,)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] ()
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] ()
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] (1,)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] ()
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] (0, 6)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] ()
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] (datetime.date(2026, 1, 10),)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] ()
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] (1,)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - [cached since 1.316e+04s ago] (2,)
2026-01-10 18:23:57 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.397e+04s ago] (1,)
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.397e+04s ago] (1,)
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.319e+04s ago] ()
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.319e+04s ago] ()
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.319e+04s ago] ()
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.319e+04s ago] (0, 10)
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.317e+04s ago] (1,)
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.317e+04s ago] (2,)
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.397e+04s ago] (1,)
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.319e+04s ago] ()
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.319e+04s ago] (0, 10)
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.397e+04s ago] (1,)
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.319e+04s ago] ()
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.319e+04s ago] ()
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.317e+04s ago] (1,)
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - [cached since 1.317e+04s ago] (2,)
2026-01-10 18:24:08 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - [cached since 1.397e+04s ago] (1,)
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] {}
2026-01-10 18:24:09 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - [cached since 1.397e+04s ago] (1,)
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - [cached since 1.318e+04s ago] {}
2026-01-10 18:24:09 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:24:09 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:24:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:24:14 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 18:24:14 - sqlalchemy.engine.Engine - INFO - [cached since 1.398e+04s ago] (1,)
2026-01-10 18:24:14 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 18:24:14 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-10 18:24:14 - sqlalchemy.engine.Engine - INFO - [cached since 1.319e+04s ago] {}
2026-01-10 18:24:14 - routers.external_systems - INFO - 用户 admin 查询可访问的外部系统，返回 1 个系统
2026-01-10 18:24:14 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 18:24:14 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:19:14 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 20:19:14 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 20:19:14 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 20:19:14 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 20:19:14 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 20:19:14 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 20:19:15 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 20:19:15 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 6937s ago] ('email', 'admin@example.com')
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 6937s ago] (1, 'email', 'admin@example.com', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', 1, None)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 20:19:18 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.088e+04s ago] (1,)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] ()
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] (1,)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.088e+04s ago] (1,)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.088e+04s ago] (1,)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] (datetime.date(2026, 1, 10),)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.088e+04s ago] (1,)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.01e+04s ago] ()
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] ()
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.01e+04s ago] ()
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] ()
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.01e+04s ago] ()
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.01e+04s ago] (0, 6)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] (1,)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] (0, 6)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] (2,)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.088e+04s ago] (1,)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] ()
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] (1,)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] (datetime.date(2026, 1, 10),)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] ()
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.088e+04s ago] (1,)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.088e+04s ago] (1,)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] ()
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.088e+04s ago] (1,)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.01e+04s ago] ()
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] (0, 6)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.01e+04s ago] ()
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.01e+04s ago] (0, 6)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.01e+04s ago] ()
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] (1,)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - [cached since 2.008e+04s ago] (2,)
2026-01-10 20:19:18 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:27 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:27 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:21:27 - sqlalchemy.engine.Engine - INFO - [cached since 2.101e+04s ago] (1,)
2026-01-10 20:21:27 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 20:21:27 - sqlalchemy.engine.Engine - INFO - [cached since 2.024e+04s ago] ()
2026-01-10 20:21:27 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 20:21:27 - sqlalchemy.engine.Engine - INFO - [cached since 2.024e+04s ago] (0, 10)
2026-01-10 20:21:27 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s)
2026-01-10 20:21:27 - sqlalchemy.engine.Engine - INFO - [cached since 2.024e+04s ago] (1,)
2026-01-10 20:21:28 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:28 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:28 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:21:28 - sqlalchemy.engine.Engine - INFO - [cached since 2.101e+04s ago] (1,)
2026-01-10 20:21:28 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT roles.id AS id, roles.name AS name, roles.description AS description, roles.is_system AS is_system, roles.created_at AS created_at 
FROM roles) AS anon_1
2026-01-10 20:21:28 - sqlalchemy.engine.Engine - INFO - [cached since 2.024e+04s ago] ()
2026-01-10 20:21:28 - sqlalchemy.engine.Engine - INFO - SELECT roles.id, roles.name, roles.description, roles.is_system, roles.created_at 
FROM roles 
 LIMIT %s, %s
2026-01-10 20:21:28 - sqlalchemy.engine.Engine - INFO - [cached since 2.024e+04s ago] (0, 10)
2026-01-10 20:21:28 - sqlalchemy.engine.Engine - INFO - SELECT roles_1.id AS roles_1_id, permissions.id AS permissions_id, permissions.name AS permissions_name, permissions.code AS permissions_code, permissions.resource AS permissions_resource, permissions.action AS permissions_action, permissions.description AS permissions_description, permissions.created_at AS permissions_created_at 
FROM roles AS roles_1 INNER JOIN role_permissions AS role_permissions_1 ON roles_1.id = role_permissions_1.role_id INNER JOIN permissions ON permissions.id = role_permissions_1.permission_id 
WHERE roles_1.id IN (%s)
2026-01-10 20:21:28 - sqlalchemy.engine.Engine - INFO - [cached since 2.024e+04s ago] (1,)
2026-01-10 20:21:28 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] (1,)
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] ()
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - SELECT menus.parent_id AS menus_parent_id, menus.id AS menus_id, menus.name AS menus_name, menus.path AS menus_path, menus.component AS menus_component, menus.icon AS menus_icon, menus.sort_order AS menus_sort_order, menus.is_visible AS menus_is_visible, menus.permission_id AS menus_permission_id, menus.created_at AS menus_created_at 
FROM menus 
WHERE menus.parent_id IN (%s, %s)
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] (3, 4)
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] (1,)
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - SELECT menus.id, menus.name, menus.path, menus.component, menus.icon, menus.parent_id, menus.sort_order, menus.is_visible, menus.permission_id, menus.created_at 
FROM menus ORDER BY menus.sort_order, menus.id
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] ()
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - SELECT menus.parent_id AS menus_parent_id, menus.id AS menus_id, menus.name AS menus_name, menus.path AS menus_path, menus.component AS menus_component, menus.icon AS menus_icon, menus.sort_order AS menus_sort_order, menus.is_visible AS menus_is_visible, menus.permission_id AS menus_permission_id, menus.created_at AS menus_created_at 
FROM menus 
WHERE menus.parent_id IN (%s, %s)
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] (3, 4)
2026-01-10 20:21:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] (1,)
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - [cached since 2.025e+04s ago] {}
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - [cached since 2.025e+04s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 20:21:37 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] (1,)
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - [cached since 2.025e+04s ago] {}
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - [cached since 2.025e+04s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 20:21:37 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:37 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] (1,)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] ()
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] (1,)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] (1,)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] (1,)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.024e+04s ago] ()
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] (1,)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] (datetime.date(2026, 1, 10),)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.024e+04s ago] ()
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.024e+04s ago] ()
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] ()
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] ()
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.024e+04s ago] (0, 6)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] (1,)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] (0, 6)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] (2,)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] (1,)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] (1,)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] (1,)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.102e+04s ago] (1,)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] ()
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.024e+04s ago] ()
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] ()
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] (1,)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.024e+04s ago] ()
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.024e+04s ago] (0, 6)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] (0, 6)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] (datetime.date(2026, 1, 10),)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.024e+04s ago] ()
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] (1,)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] ()
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - [cached since 2.023e+04s ago] (2,)
2026-01-10 20:21:40 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users INNER JOIN user_auths ON users.id = user_auths.user_id 
WHERE user_auths.auth_type = %s AND user_auths.auth_key = %s AND user_auths.is_verified = true
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 1.137e+04s ago] ('email', 'admin@example.com')
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 1.137e+04s ago] (1, 'email', 'admin@example.com', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', 1, None)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-10 21:33:12 - routers.auth - INFO - 用户登录成功: admin
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.532e+04s ago] (1,)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.532e+04s ago] (1,)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.532e+04s ago] (1,)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.532e+04s ago] (1,)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] ()
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] ()
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.454e+04s ago] ()
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.454e+04s ago] ()
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] (1,)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.454e+04s ago] ()
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.454e+04s ago] (0, 6)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] (0, 6)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] (datetime.date(2026, 1, 10),)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] (1,)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] ()
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] (2,)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.532e+04s ago] (1,)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders ORDER BY orders.created_at DESC) AS anon_1
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.454e+04s ago] ()
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.532e+04s ago] (1,)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT orders.id, orders.order_no, orders.user_id, orders.product_id, orders.product_type, orders.amount, orders.quantity, orders.status, orders.payment_method, orders.payment_time, orders.description, orders.created_at, orders.updated_at 
FROM orders ORDER BY orders.created_at DESC 
 LIMIT %s, %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.454e+04s ago] (0, 6)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT point_transactions.id AS id, point_transactions.user_id AS user_id, point_transactions.type AS type, point_transactions.points AS points, point_transactions.balance_after AS balance_after, point_transactions.amount AS amount, point_transactions.description AS description, point_transactions.related_id AS related_id, point_transactions.related_type AS related_type, point_transactions.created_at AS created_at, users.username AS username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC) AS anon_1
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] ()
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT point_transactions.id, point_transactions.user_id, point_transactions.type, point_transactions.points, point_transactions.balance_after, point_transactions.amount, point_transactions.description, point_transactions.related_id, point_transactions.related_type, point_transactions.created_at, users.username 
FROM point_transactions LEFT OUTER JOIN users ON users.id = point_transactions.user_id ORDER BY point_transactions.created_at DESC 
 LIMIT %s, %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] (0, 6)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.532e+04s ago] (1,)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] ()
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.532e+04s ago] (1,)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE users.status = %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] (1,)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.454e+04s ago] ()
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(users.id) AS count_1 
FROM users 
WHERE date(users.created_at) = %s
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] (datetime.date(2026, 1, 10),)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT sum(orders.amount) AS sum_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders) AS anon_1, orders
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.454e+04s ago] ()
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT sum(members.points) AS sum_1 
FROM members
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] ()
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] (1,)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT orders.id AS id, orders.order_no AS order_no, orders.user_id AS user_id, orders.product_id AS product_id, orders.product_type AS product_type, orders.amount AS amount, orders.quantity AS quantity, orders.status AS status, orders.payment_method AS payment_method, orders.payment_time AS payment_time, orders.description AS description, orders.created_at AS created_at, orders.updated_at AS updated_at 
FROM orders 
WHERE orders.status = %s) AS anon_1
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.452e+04s ago] (2,)
2026-01-10 21:33:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - [cached since 2.532e+04s ago] (1,)
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - [cached since 2.455e+04s ago] {}
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - [cached since 2.455e+04s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 21:33:17 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - [cached since 2.532e+04s ago] (1,)
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems) AS anon_1
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - [cached since 2.455e+04s ago] {}
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
 LIMIT %(param_1)s, %(param_2)s
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - [cached since 2.455e+04s ago] {'param_1': 0, 'param_2': 10}
2026-01-10 21:33:17 - routers.external_systems - INFO - 用户 admin 查询外部系统列表，返回 1 条记录
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-10 21:33:17 - sqlalchemy.engine.Engine - INFO - ROLLBACK
