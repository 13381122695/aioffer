2026-01-14 00:04:46 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-14 00:04:46 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.username = %s
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - [cached since 4627s ago] ('user2',)
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - SELECT members.user_id AS members_user_id, members.id AS members_id, members.member_level AS members_member_level, members.points AS members_points, members.balance AS members_balance, members.expired_at AS members_expired_at, members.created_at AS members_created_at, members.updated_at AS members_updated_at 
FROM members 
WHERE members.user_id IN (%s)
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - [cached since 4627s ago] (10,)
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - [cached since 4626s ago] (10, 'username', 'user2', '127.0.0.1', 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36', 1, None)
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-14 00:24:07 - routers.auth - INFO - 用户登录成功: user2
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - [cached since 4626s ago] (10,)
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - [cached since 4176s ago] {}
2026-01-14 00:24:07 - routers.external_systems - INFO - 用户 user2 查询可访问的外部系统，返回 1 个系统
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - [cached since 4626s ago] (10,)
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - [cached since 4176s ago] {}
2026-01-14 00:24:07 - routers.external_systems - INFO - 用户 user2 查询可访问的外部系统，返回 1 个系统
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 00:24:07 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 00:24:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 00:24:09 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 00:24:09 - sqlalchemy.engine.Engine - INFO - [cached since 4628s ago] (10,)
2026-01-14 00:24:09 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 00:24:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 00:24:09 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 00:24:09 - sqlalchemy.engine.Engine - INFO - [cached since 4628s ago] (10,)
2026-01-14 00:24:09 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 00:24:09 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 00:24:09 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 00:24:09 - sqlalchemy.engine.Engine - INFO - [cached since 4628s ago] (10,)
2026-01-14 00:24:09 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:09:12 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-14 07:09:13 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-14 07:09:13 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-14 07:09:13 - routers.auth - ERROR - 获取当前用户失败: 
2026-01-14 07:09:24 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:09:24 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.username = %s
2026-01-14 07:09:24 - sqlalchemy.engine.Engine - INFO - [cached since 2.894e+04s ago] ('user1',)
2026-01-14 07:09:24 - sqlalchemy.engine.Engine - INFO - SELECT members.user_id AS members_user_id, members.id AS members_id, members.member_level AS members_member_level, members.points AS members_points, members.balance AS members_balance, members.expired_at AS members_expired_at, members.created_at AS members_created_at, members.updated_at AS members_updated_at 
FROM members 
WHERE members.user_id IN (%s)
2026-01-14 07:09:24 - sqlalchemy.engine.Engine - INFO - [cached since 2.894e+04s ago] (5,)
2026-01-14 07:09:24 - sqlalchemy.engine.Engine - INFO - INSERT INTO login_logs (user_id, auth_type, identifier, ip, user_agent, success, failure_reason) VALUES (%s, %s, %s, %s, %s, %s, %s)
2026-01-14 07:09:24 - sqlalchemy.engine.Engine - INFO - [cached since 2.894e+04s ago] (5, 'username', 'user1', '127.0.0.1', 'Mozilla/5.0 (iPhone; CPU iPhone OS 18_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 MicroMessenger/8.0.67(0x1800432e) NetType/WIFI Language/zh_CN', 1, None)
2026-01-14 07:09:24 - sqlalchemy.engine.Engine - INFO - COMMIT
2026-01-14 07:09:24 - routers.auth - INFO - 用户登录成功: user1
2026-01-14 07:09:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:09:25 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 07:09:25 - sqlalchemy.engine.Engine - INFO - [cached since 2.894e+04s ago] (5,)
2026-01-14 07:09:25 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:09:25 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-14 07:09:25 - sqlalchemy.engine.Engine - INFO - [cached since 2.849e+04s ago] {}
2026-01-14 07:09:25 - routers.external_systems - INFO - 用户 user1 查询可访问的外部系统，返回 1 个系统
2026-01-14 07:09:25 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:09:25 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - [cached since 2.896e+04s ago] (5,)
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - [generated in 0.00012s] {'id_1': 1, 'param_1': 1}
2026-01-14 07:09:38 - routers.external_systems - INFO - 外部系统 access_token 发放成功 user_id=5 system_id=1 duration_ms=2
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - [cached since 2.896e+04s ago] (5,)
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - [cached since 0.08851s ago] {'id_1': 1, 'param_1': 1}
2026-01-14 07:09:38 - routers.external_systems - INFO - 用户 user1 获取外部系统 曼彻斯特大学研究生专业入学评估系统 的集成配置
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:09:38 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.905e+04s ago] (5,)
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - [cached since 93.78s ago] {'id_1': 1, 'param_1': 1}
2026-01-14 07:11:12 - routers.external_systems - INFO - 外部系统 access_token 发放成功 user_id=5 system_id=1 duration_ms=1
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - [cached since 2.905e+04s ago] (5,)
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - [cached since 93.89s ago] {'id_1': 1, 'param_1': 1}
2026-01-14 07:11:12 - routers.external_systems - INFO - 用户 user1 获取外部系统 曼彻斯特大学研究生专业入学评估系统 的集成配置
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:11:12 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - [cached since 2.906e+04s ago] (5,)
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - [cached since 105.9s ago] {'id_1': 1, 'param_1': 1}
2026-01-14 07:11:24 - routers.external_systems - INFO - 外部系统 access_token 发放成功 user_id=5 system_id=1 duration_ms=1
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - [cached since 2.906e+04s ago] (5,)
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - [cached since 106s ago] {'id_1': 1, 'param_1': 1}
2026-01-14 07:11:24 - routers.external_systems - INFO - 用户 user1 获取外部系统 曼彻斯特大学研究生专业入学评估系统 的集成配置
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:11:24 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:11:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:11:31 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 07:11:31 - sqlalchemy.engine.Engine - INFO - [cached since 2.907e+04s ago] (5,)
2026-01-14 07:11:31 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:11:31 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-14 07:11:31 - sqlalchemy.engine.Engine - INFO - [cached since 2.862e+04s ago] {}
2026-01-14 07:11:31 - routers.external_systems - INFO - 用户 user1 查询可访问的外部系统，返回 1 个系统
2026-01-14 07:11:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:11:31 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:11:58 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:11:58 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 07:11:58 - sqlalchemy.engine.Engine - INFO - [cached since 2.91e+04s ago] (5,)
2026-01-14 07:11:58 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:11:58 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:11:58 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 07:11:58 - sqlalchemy.engine.Engine - INFO - [cached since 2.91e+04s ago] (5,)
2026-01-14 07:11:58 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:12:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:12:08 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 07:12:08 - sqlalchemy.engine.Engine - INFO - [cached since 2.911e+04s ago] (5,)
2026-01-14 07:12:08 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:12:08 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems
2026-01-14 07:12:08 - sqlalchemy.engine.Engine - INFO - [cached since 2.866e+04s ago] {}
2026-01-14 07:12:08 - routers.external_systems - INFO - 用户 user1 查询可访问的外部系统，返回 1 个系统
2026-01-14 07:12:08 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:12:08 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - [cached since 2.913e+04s ago] (5,)
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - [cached since 174.8s ago] {'id_1': 1, 'param_1': 1}
2026-01-14 07:12:33 - routers.external_systems - INFO - 外部系统 access_token 发放成功 user_id=5 system_id=1 duration_ms=1
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.username, users.email, users.password_hash, users.full_name, users.avatar_url, users.phone, users.status, users.user_type, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %s
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - [cached since 2.913e+04s ago] (5,)
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - SELECT external_systems.id AS external_systems_id, external_systems.name AS external_systems_name, external_systems.system_type AS external_systems_system_type, external_systems.page_url AS external_systems_page_url, external_systems.api_key AS external_systems_api_key, external_systems.api_secret AS external_systems_api_secret, external_systems.endpoint_url AS external_systems_endpoint_url, external_systems.config AS external_systems_config, external_systems.is_active AS external_systems_is_active, external_systems.created_at AS external_systems_created_at, external_systems.updated_at AS external_systems_updated_at 
FROM external_systems 
WHERE external_systems.id = %(id_1)s AND external_systems.is_active = true 
 LIMIT %(param_1)s
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - [cached since 174.9s ago] {'id_1': 1, 'param_1': 1}
2026-01-14 07:12:33 - routers.external_systems - INFO - 用户 user1 获取外部系统 曼彻斯特大学研究生专业入学评估系统 的集成配置
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2026-01-14 07:12:33 - sqlalchemy.engine.Engine - INFO - ROLLBACK
